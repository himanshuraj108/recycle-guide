<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Recycle Guide</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    <style>
      :root {
        --primary-color: #2ecc71;
        --primary-dark: #27ae60;
        --primary-light: #a8f0c6;
        --secondary-color: #3498db;
        --secondary-dark: #2980b9;
        --accent-color: #9b59b6;
        --error-color: #e74c3c;
        --warning-color: #f39c12;
        --text-color: #333;
        --text-light: #777;
        --background-light: #f9f9f9;
        --background-dark: #e0e0e0;
        --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        --card-shadow-hover: 0 10px 20px rgba(0, 0, 0, 0.15);
        --transition-speed: 0.3s;
        --border-radius: 10px;
        --primary-rgb: 46, 204, 113;
        --secondary-rgb: 52, 152, 219;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Roboto", sans-serif;
        line-height: 1.6;
        color: var(--text-color);
        background-color: #f5f5f5;
        background-image: linear-gradient(120deg, #f5f5f5 0%, #e0f7fa 100%);
        min-height: 100vh;
        scroll-behavior: smooth;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      header {
        background-color: white;
        padding: 15px 0;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        position: sticky;
        top: 0;
        z-index: 100;
      }

      .header-content {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .right-section {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .logo {
        position: relative;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .logo-icon {
        position: relative;
        width: 48px;
        height: 48px;
        background: linear-gradient(
          45deg,
          var(--primary-color),
          var(--secondary-color)
        );
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 24px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        animation: logoFloat 3s ease-in-out infinite,
          logoRotate 15s linear infinite;
        transform-origin: center;
      }

      .logo h1 {
        position: relative;
        font-size: 28px;
        background: linear-gradient(
          45deg,
          var(--primary-color),
          var(--secondary-color)
        );
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        font-weight: 700;
        animation: textPulse 4s ease-in-out infinite;
      }

      .logo h1::after {
        content: "";
        position: absolute;
        bottom: -3px;
        left: 0;
        width: 100%;
        height: 2px;
        background: linear-gradient(
          90deg,
          transparent,
          var(--primary-color),
          transparent
        );
        animation: lineSlide 4s ease-in-out infinite;
      }

      @keyframes logoFloat {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-5px);
        }
      }

      @keyframes logoRotate {
        0% {
          transform: translateY(0) rotate(0deg);
        }
        25% {
          transform: translateY(-5px) rotate(3deg);
        }
        50% {
          transform: translateY(0) rotate(0deg);
        }
        75% {
          transform: translateY(-5px) rotate(-3deg);
        }
        100% {
          transform: translateY(0) rotate(0deg);
        }
      }

      @keyframes textPulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.8;
        }
      }

      @keyframes lineSlide {
        0%,
        100% {
          width: 0;
          left: 0;
        }
        50% {
          width: 100%;
          left: 0;
        }
      }

      /* Recycling symbol animation inside logo */
      .recycling-symbol {
        position: relative;
        display: inline-block;
      }

      .recycling-symbol i {
        animation: symbolSpin 10s linear infinite;
      }

      @keyframes symbolSpin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* Make the logo interactive */
      .logo:hover .logo-icon {
        animation: logoShake 0.5s ease-in-out;
      }

      @keyframes logoShake {
        0%,
        100% {
          transform: rotate(0);
        }
        20% {
          transform: rotate(-10deg);
        }
        40% {
          transform: rotate(10deg);
        }
        60% {
          transform: rotate(-10deg);
        }
        80% {
          transform: rotate(10deg);
        }
      }

      .hero {
        text-align: center;
        margin: 50px 0;
        padding: 60px 20px;
        background-color: white;
        border-radius: var(--border-radius);
        box-shadow: var(--card-shadow);
        background-image: url("https://images.unsplash.com/photo-1532996122724-e3c354a0b15b?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80");
        background-size: cover;
        background-position: center;
        position: relative;
        color: white;
        overflow: hidden;
      }

      .hero::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          135deg,
          rgba(0, 0, 0, 0.7),
          rgba(46, 204, 113, 0.7)
        );
        border-radius: var(--border-radius);
      }

      .hero-content {
        position: relative;
        z-index: 1;
      }

      .hero h2 {
        font-size: 3rem;
        margin-bottom: 15px;
        font-weight: 700;
        animation: fadeInUp 1s ease-out;
      }

      .hero p {
        font-size: 1.3rem;
        margin-bottom: 30px;
        max-width: 700px;
        margin-left: auto;
        margin-right: auto;
        animation: fadeInUp 1s ease-out 0.3s both;
      }

      .search-container {
        max-width: 600px;
        margin: 0 auto;
        position: relative;
        animation: fadeInUp 1s ease-out 0.6s both;
      }

      .search-input {
        width: 100%;
        padding: 15px 20px;
        padding-right: 130px;
        font-size: 1.1rem;
        border: none;
        border-radius: 30px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        transition: all var(--transition-speed);
      }

      .search-input:focus {
        outline: none;
        box-shadow: 0 4px 20px rgba(46, 204, 113, 0.4);
      }

      .search-button {
        position: absolute;
        right: 60px;
        top: 50%;
        transform: translateY(-50%);
        height: calc(100% - 10px);
        padding: 0 25px;
        background: linear-gradient(
          45deg,
          var(--primary-color),
          var(--primary-dark)
        );
        color: white;
        border: none;
        border-radius: 25px;
        cursor: pointer;
        transition: all var(--transition-speed);
        font-weight: 500;
        font-size: 1rem;
      }

      .search-button:hover {
        background: linear-gradient(
          45deg,
          var(--primary-dark),
          var(--primary-color)
        );
        transform: translateY(-50%) translateY(-1px);
        box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
      }

      .voice-search {
        position: absolute;
        right: 5px;
        top: 50%;
        transform: translateY(-50%);
        display: flex;
        align-items: center;
        justify-content: center;
        width: 45px;
        height: 45px;
        background: linear-gradient(
          45deg,
          var(--accent-color),
          var(--secondary-color)
        );
        color: white;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        transition: all var(--transition-speed);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      }

      .voice-search:hover {
        transform: translateY(-50%) scale(1.1);
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.25);
      }

      .voice-search i {
        font-size: 1.2rem;
      }

      .feature-section {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 30px;
        margin: 60px 0;
      }

      .feature-card {
        background-color: white;
        border-radius: var(--border-radius);
        padding: 30px;
        box-shadow: var(--card-shadow);
        transition: transform var(--transition-speed),
          box-shadow var(--transition-speed);
        position: relative;
        overflow: hidden;
        z-index: 1;
      }

      .feature-card::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 5px;
        background: linear-gradient(
          90deg,
          var(--primary-color),
          var(--secondary-color)
        );
        z-index: -1;
      }

      .feature-card:hover {
        transform: translateY(-10px);
        box-shadow: var(--card-shadow-hover);
      }

      .feature-icon {
        background: linear-gradient(
          135deg,
          var(--primary-light),
          var(--primary-color)
        );
        width: 70px;
        height: 70px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 28px;
        margin-bottom: 25px;
        color: white;
        box-shadow: 0 5px 15px rgba(46, 204, 113, 0.2);
      }

      .feature-card h3 {
        font-size: 1.6rem;
        margin-bottom: 15px;
        color: var(--primary-dark);
        position: relative;
        padding-bottom: 10px;
      }

      .feature-card h3::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 40px;
        height: 3px;
        background-color: var(--primary-color);
      }

      .common-items {
        margin: 60px 0;
        position: relative;
      }

      .common-items h2 {
        text-align: center;
        font-size: 2.2rem;
        margin-bottom: 30px;
        color: var(--primary-dark);
        position: relative;
        padding-bottom: 15px;
        display: inline-block;
        left: 50%;
        transform: translateX(-50%);
      }

      .common-items h2::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background: linear-gradient(
          90deg,
          var(--primary-color),
          var(--secondary-color)
        );
        border-radius: 2px;
      }

      .items-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 25px;
      }

      .item-card {
        background-color: white;
        border-radius: var(--border-radius);
        padding: 25px;
        box-shadow: var(--card-shadow);
        text-align: center;
        cursor: pointer;
        transition: all 0.4s ease;
        position: relative;
        overflow: hidden;
      }

      .item-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          135deg,
          var(--primary-light),
          var(--secondary-color)
        );
        opacity: 0;
        z-index: 0;
        transition: opacity 0.4s ease;
      }

      .item-card:hover {
        transform: translateY(-7px) scale(1.03);
        box-shadow: var(--card-shadow-hover);
      }

      .item-card:hover::before {
        opacity: 0.1;
      }

      .item-card > * {
        position: relative;
        z-index: 1;
      }

      .item-icon {
        font-size: 2.5rem;
        margin-bottom: 15px;
        color: var(--secondary-color);
        transition: transform 0.3s ease;
      }

      .item-card:hover .item-icon {
        transform: scale(1.2);
        color: var(--primary-color);
      }

      .item-card h3 {
        font-size: 1.3rem;
        margin-bottom: 5px;
        transition: color 0.3s ease;
      }

      .item-card:hover h3 {
        color: var(--primary-dark);
      }

      .item-card p {
        color: var(--text-light);
        font-size: 0.95rem;
        font-weight: 500;
        background-color: rgba(52, 152, 219, 0.1);
        padding: 4px 10px;
        border-radius: 15px;
        display: inline-block;
        transition: background-color 0.3s ease;
      }

      .item-card:hover p {
        background-color: rgba(46, 204, 113, 0.15);
      }

      .results-section {
        margin: 60px 0;
        display: none;
        animation: fadeIn 0.5s ease;
      }

      .results-card {
        background-color: white;
        border-radius: var(--border-radius);
        padding: 35px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
        position: relative;
        overflow: hidden;
      }

      .results-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 5px;
        height: 100%;
        background: linear-gradient(
          to bottom,
          var(--primary-color),
          var(--secondary-color)
        );
      }

      .results-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 25px;
        padding-bottom: 20px;
        border-bottom: 1px solid var(--background-dark);
      }

      .results-title {
        font-size: 2rem;
        color: var(--primary-dark);
        position: relative;
      }

      .recyclable-badge {
        padding: 10px 20px;
        border-radius: 50px;
        font-weight: 600;
        font-size: 1rem;
        letter-spacing: 0.5px;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
      }

      .recyclable-yes {
        background: linear-gradient(
          135deg,
          rgba(46, 204, 113, 0.15),
          rgba(46, 204, 113, 0.25)
        );
        color: var(--primary-dark);
        border: 1px solid rgba(46, 204, 113, 0.3);
      }

      .recyclable-no {
        background: linear-gradient(
          135deg,
          rgba(231, 76, 60, 0.15),
          rgba(231, 76, 60, 0.25)
        );
        color: var(--error-color);
        border: 1px solid rgba(231, 76, 60, 0.3);
      }

      .recyclable-partial {
        background: linear-gradient(
          135deg,
          rgba(241, 196, 15, 0.15),
          rgba(241, 196, 15, 0.25)
        );
        color: var(--warning-color);
        border: 1px solid rgba(241, 196, 15, 0.3);
      }

      .info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 25px;
      }

      .info-card {
        background-color: var(--background-light);
        border-radius: var(--border-radius);
        padding: 25px;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        border: 1px solid rgba(0, 0, 0, 0.05);
      }

      .info-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        border-color: var(--primary-light);
      }

      .info-card h3 {
        font-size: 1.3rem;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 12px;
        color: var(--secondary-dark);
      }

      .card-icon {
        font-size: 1.6rem;
        background-color: white;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
      }

      .info-card p {
        line-height: 1.7;
        font-size: 1.05rem;
      }

      .loader {
        display: none;
        text-align: center;
        padding: 60px 0;
      }

      .spinner-container {
        height: 150px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }

      .loader p {
        margin-top: 20px;
        font-size: 1.2rem;
        color: var(--primary-dark);
        font-weight: 500;
      }

      .error-message {
        background: linear-gradient(
          135deg,
          rgba(231, 76, 60, 0.1),
          rgba(231, 76, 60, 0.2)
        );
        color: var(--error-color);
        padding: 20px;
        border-radius: var(--border-radius);
        margin: 30px 0;
        display: none;
        border: 1px solid rgba(231, 76, 60, 0.3);
        font-weight: 500;
        font-size: 1.1rem;
        box-shadow: 0 5px 15px rgba(231, 76, 60, 0.1);
        text-align: center;
      }

      .impact-section {
        margin-top: 30px;
        background-color: white;
        border-radius: var(--border-radius);
        padding: 30px;
        box-shadow: var(--card-shadow);
        display: none;
      }

      .impact-section h3 {
        font-size: 1.6rem;
        color: var(--primary-dark);
        margin-bottom: 20px;
        text-align: center;
      }

      .impact-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 25px;
      }

      .impact-stat {
        text-align: center;
        padding: 20px;
        background-color: var(--background-light);
        border-radius: var(--border-radius);
        transition: transform 0.3s ease;
      }

      .impact-stat:hover {
        transform: translateY(-5px);
      }

      .stat-value {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 10px;
        background: linear-gradient(
          45deg,
          var(--primary-color),
          var(--secondary-color)
        );
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
      }

      .stat-label {
        font-size: 1.1rem;
        color: var(--text-light);
      }

      .chart-container {
        height: 250px;
        margin-top: 30px;
      }

      footer {
        background-color: white;
        padding: 50px 0 30px;
        text-align: center;
        margin-top: 80px;
        box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.05);
        position: relative;
      }

      footer::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 5px;
        background: linear-gradient(
          90deg,
          var(--primary-color),
          var(--secondary-color)
        );
      }

      .footer-content {
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .footer-links {
        display: flex;
        gap: 25px;
        margin: 25px 0;
        flex-wrap: wrap;
        justify-content: center;
      }

      .footer-links a {
        color: var(--secondary-color);
        text-decoration: none;
        transition: color var(--transition-speed);
        font-weight: 500;
        font-size: 1.05rem;
        position: relative;
      }

      .footer-links a::after {
        content: "";
        position: absolute;
        bottom: -5px;
        left: 0;
        width: 0;
        height: 2px;
        background-color: var(--primary-color);
        transition: width 0.3s ease;
      }

      .footer-links a:hover {
        color: var(--primary-color);
      }

      .footer-links a:hover::after {
        width: 100%;
      }

      .copyright {
        color: var(--text-light);
        font-size: 0.95rem;
        margin-top: 10px;
      }

      .social-links {
        display: flex;
        gap: 15px;
        margin-top: 20px;
      }

      .social-icon {
        width: 40px;
        height: 40px;
        background-color: var(--background-light);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--secondary-color);
        font-size: 1.2rem;
        transition: all 0.3s ease;
      }

      .social-icon:hover {
        background-color: var(--primary-color);
        color: white;
        transform: translateY(-3px);
      }

      .map-section {
        margin-top: 30px;
        display: none;
      }

      .map-section h3 {
        font-size: 1.6rem;
        color: var(--primary-dark);
        margin-bottom: 20px;
        text-align: center;
      }

      .map-container {
        height: 300px;
        background-color: var(--background-light);
        border-radius: var(--border-radius);
        overflow: hidden;
      }

      .webcam-section {
        display: none;
        margin-top: 30px;
      }

      .webcam-container {
        background-color: var(--background-light);
        padding: 20px;
        border-radius: var(--border-radius);
        text-align: center;
      }

      .webcam-feed {
        max-width: 100%;
        height: 300px;
        background-color: #000;
        margin: 0 auto;
        border-radius: 8px;
        overflow: hidden;
      }

      .webcam-button {
        display: inline-block;
        padding: 10px 20px;
        background: linear-gradient(
          45deg,
          var(--primary-color),
          var(--secondary-color)
        );
        color: white;
        border: none;
        border-radius: 50px;
        margin-top: 15px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .webcam-button:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
      }

      .tips-carousel {
        margin: 40px 0;
        position: relative;
        overflow: hidden;
        padding: 20px 0;
      }

      .tips-carousel h3 {
        text-align: center;
        font-size: 1.8rem;
        color: var(--primary-dark);
        margin-bottom: 30px;
      }

      .tips-container {
        display: flex;
        gap: 30px;
        animation: scroll 30s linear infinite;
        padding: 10px 0;
      }

      .tip-card {
        flex: 0 0 350px;
        background-color: white;
        border-radius: var(--border-radius);
        padding: 25px;
        box-shadow: var(--card-shadow);
        transition: transform 0.3s ease;
      }

      .tip-card:hover {
        transform: translateY(-10px);
        box-shadow: var(--card-shadow-hover);
      }

      .tip-card h4 {
        color: var(--primary-dark);
        font-size: 1.3rem;
        margin-bottom: 15px;
        border-bottom: 2px solid var(--primary-light);
        padding-bottom: 10px;
      }

      .tip-card p {
        color: var(--text-color);
        line-height: 1.7;
      }

      @keyframes scroll {
        0% {
          transform: translateX(0);
        }
        100% {
          transform: translateX(calc(-350px * 3 - 90px));
        }
      }

      .tips-carousel:hover .tips-container {
        animation-play-state: paused;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .fade-in {
        opacity: 0;
        animation: fadeInUp 0.8s ease-out forwards;
      }

      @media (max-width: 768px) {
        .hero h2 {
          font-size: 2.2rem;
        }

        .hero p {
          font-size: 1.1rem;
        }

        .feature-section,
        .info-grid {
          grid-template-columns: 1fr;
        }

        .items-grid {
          grid-template-columns: repeat(2, 1fr);
        }

        .impact-grid {
          grid-template-columns: 1fr;
        }

        .tip-card {
          flex: 0 0 290px;
        }

        .footer-links {
          gap: 15px;
        }
      }

      @media (max-width: 480px) {
        .items-grid {
          grid-template-columns: 1fr;
        }

        .results-header {
          flex-direction: column;
          align-items: flex-start;
          gap: 15px;
        }

        .search-input {
          padding-right: 110px;
        }

        .search-button {
          right: 50px;
          padding: 0 15px;
          font-size: 0.9rem;
        }

        .voice-search {
          width: 40px;
          height: 40px;
        }
      }

      .keyboard-shortcuts {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: white;
        padding: 15px;
        border-radius: var(--border-radius);
        box-shadow: var(--card-shadow);
        z-index: 100;
        font-size: 0.9rem;
        display: none;
      }

      .keyboard-shortcuts h4 {
        margin-bottom: 10px;
        color: var(--primary-dark);
      }

      .keyboard-shortcuts ul {
        list-style: none;
      }

      .keyboard-shortcuts li {
        margin-bottom: 5px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .keyboard-shortcuts .key {
        background-color: var(--background-light);
        padding: 3px 8px;
        border-radius: 5px;
        font-weight: 500;
      }

      .theme-switch {
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 100;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--secondary-color)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.2rem;
        cursor: pointer;
        box-shadow: var(--card-shadow);
        transition: all 0.3s ease;
      }

      .theme-switch:hover {
        transform: scale(1.1);
        box-shadow: var(--card-shadow-hover);
      }

      /* Animations for the advanced UI */
      @keyframes float {
        0% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
        100% {
          transform: translateY(0px);
        }
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }

      /* Dark mode */
      body.dark-mode {
        background: linear-gradient(120deg, #1a1a2e 0%, #16213e 100%);
        color: #f0f0f0;
      }

      body.dark-mode header,
      body.dark-mode footer,
      body.dark-mode .feature-card,
      body.dark-mode .item-card,
      body.dark-mode .info-card,
      body.dark-mode .results-card {
        background-color: #222831;
        color: #f0f0f0;
      }

      body.dark-mode .info-card {
        background-color: #16213e;
        border-color: #0f3460;
      }

      body.dark-mode .search-input {
        background-color: #2c3440;
        color: #f0f0f0;
      }

      body.dark-mode .search-input::placeholder {
        color: #aaa;
      }

      body.dark-mode .text-color {
        color: #f0f0f0;
      }

      body.dark-mode .text-light {
        color: #aaa;
      }

      body.dark-mode .card-icon {
        background-color: #16213e;
      }

      body.dark-mode .social-icon {
        background-color: #16213e;
      }

      body.dark-mode .keyboard-shortcuts,
      body.dark-mode .theme-switch {
        background-color: #222831;
      }

      /* Online/Offline Status */
      .status-indicator {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 5px 12px;
        background: var(--background-light);
        border-radius: 20px;
        font-size: 14px;
        font-weight: 500;
      }

      .status-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background-color: var(--error-color);
        position: relative;
      }

      .status-dot.online {
        background-color: var(--primary-color);
      }

      .status-dot.online::after {
        content: "";
        position: absolute;
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background-color: var(--primary-color);
        opacity: 0.5;
        animation: pulse-status 2s infinite;
      }

      @keyframes pulse-status {
        0% {
          transform: scale(1);
          opacity: 0.5;
        }
        70% {
          transform: scale(2);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 0;
        }
      }

      /* Enhanced Loading Animation */
      .advanced-loader {
        position: relative;
        width: 100px;
        height: 100px;
        margin: 50px auto;
      }

      .loader-icon {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 36px;
        color: var(--primary-color);
        animation: spin 2s linear infinite;
      }

      .loader-icon-inner {
        position: absolute;
        top: 20px;
        left: 20px;
        width: 60px;
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        color: var(--secondary-color);
        animation: spin-reverse 1.5s linear infinite;
      }

      .loader-text {
        text-align: center;
        margin-top: 15px;
        font-weight: 500;
        font-size: 18px;
        color: var(--primary-dark);
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      @keyframes spin-reverse {
        0% {
          transform: rotate(360deg);
        }
        100% {
          transform: rotate(0deg);
        }
      }

      /* Webcam Enhancements */
      .webcam-wrapper {
        position: relative;
        overflow: hidden;
        border-radius: var(--border-radius);
        background-color: #000;
      }

      .webcam-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(0, 0, 0, 0.3);
        z-index: 10;
        opacity: 0;
        transition: opacity 0.3s;
        pointer-events: none;
      }

      .webcam-wrapper.scanning .webcam-overlay {
        opacity: 1;
        animation: scanning-animation 2s infinite;
      }

      .scanning-line {
        position: absolute;
        width: 100%;
        height: 5px;
        background: linear-gradient(
          90deg,
          transparent,
          var(--primary-color),
          transparent
        );
        animation: scan-line 2s ease-in-out infinite;
      }

      .recognition-result {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 10px;
        font-size: 14px;
        transform: translateY(100%);
        transition: transform 0.3s;
      }

      .webcam-wrapper.result-shown .recognition-result {
        transform: translateY(0);
      }

      @keyframes scan-line {
        0% {
          top: 0;
        }
        50% {
          top: calc(100% - 5px);
        }
        100% {
          top: 0;
        }
      }

      @keyframes scanning-animation {
        0% {
          background: rgba(0, 0, 0, 0.2);
        }
        50% {
          background: rgba(46, 204, 113, 0.2);
        }
        100% {
          background: rgba(0, 0, 0, 0.2);
        }
      }

      /* Voice Search Animation */
      .voice-search.active {
        animation: pulse-voice 1.5s infinite;
      }

      @keyframes pulse-voice {
        0% {
          transform: translateY(-50%) scale(1);
          background: linear-gradient(
            45deg,
            var(--accent-color),
            var(--secondary-color)
          );
        }
        50% {
          transform: translateY(-50%) scale(1.1);
          background: linear-gradient(
            45deg,
            var(--error-color),
            var(--accent-color)
          );
        }
        100% {
          transform: translateY(-50%) scale(1);
          background: linear-gradient(
            45deg,
            var(--accent-color),
            var(--secondary-color)
          );
        }
      }

      .confidence-meter {
        margin-top: 15px;
        width: 100%;
      }

      .confidence-label {
        font-size: 14px;
        margin-bottom: 5px;
        color: var(--text-color);
      }

      .confidence-bar {
        height: 10px;
        background-color: #eee;
        border-radius: 5px;
        overflow: hidden;
        margin-bottom: 5px;
      }

      .confidence-fill {
        height: 100%;
        width: 0%; /* Initial width */
        background: linear-gradient(
          90deg,
          var(--primary-color),
          var(--secondary-color)
        );
        border-radius: 5px;
        transition: width 1s ease;
      }

      .confidence-value {
        font-size: 12px;
        font-weight: 500;
        color: var(--primary-dark);
        text-align: right;
      }

      body.dark-mode .confidence-label,
      body.dark-mode .confidence-value {
        color: #f0f0f0;
      }

      body.dark-mode .confidence-bar {
        background-color: rgba(255, 255, 255, 0.1);
      }

      .webcam-controls {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        justify-content: center;
        margin-top: 15px;
      }

      .webcam-button.stop {
        background: linear-gradient(45deg, #e74c3c, #c0392b);
      }

      .webcam-button i {
        margin-right: 5px;
      }

      /* Features Modal Styles */
      .features-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 1000;
        display: flex;
        justify-content: center;
        align-items: center;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }

      .features-modal.active {
        opacity: 1;
        visibility: visible;
      }

      .features-content {
        background-color: white;
        width: 90%;
        max-width: 800px;
        max-height: 80vh;
        border-radius: var(--border-radius);
        box-shadow: var(--card-shadow-hover);
        overflow: hidden;
        position: relative;
        transform: translateY(-20px);
        transition: transform 0.3s ease;
      }

      .features-modal.active .features-content {
        transform: translateY(0);
      }

      .features-header {
        background: linear-gradient(
          90deg,
          var(--primary-color),
          var(--secondary-color)
        );
        color: white;
        padding: 15px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .features-header h2 {
        margin: 0;
        font-size: 1.6rem;
      }

      .features-close {
        background: none;
        border: none;
        color: white;
        font-size: 1.5rem;
        cursor: pointer;
        transition: transform 0.3s ease;
      }

      .features-close:hover {
        transform: rotate(90deg);
      }

      .features-body {
        padding: 20px;
        overflow-y: auto;
        max-height: calc(80vh - 60px);
      }

      .feature-list {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
        list-style: none;
        padding: 0;
      }

      .feature-item {
        background-color: var(--background-light);
        border-radius: var(--border-radius);
        padding: 15px;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        display: flex;
        align-items: flex-start;
        gap: 15px;
      }

      .feature-item:hover {
        transform: translateY(-5px);
        box-shadow: var(--card-shadow);
      }

      .feature-item-icon {
        font-size: 1.8rem;
        color: var(--primary-color);
        flex-shrink: 0;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: white;
        border-radius: 50%;
        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
      }

      .feature-item-content h3 {
        margin: 0 0 8px 0;
        color: var(--primary-dark);
        font-size: 1.2rem;
      }

      .feature-item-content p {
        margin: 0;
        color: var(--text-color);
        font-size: 0.9rem;
        line-height: 1.4;
      }

      .features-button {
        background: linear-gradient(
          45deg,
          var(--primary-color),
          var(--secondary-color)
        );
        color: white;
        border: none;
        border-radius: 20px;
        padding: 8px 15px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .features-button:hover {
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        transform: translateY(-2px);
      }

      .features-button i {
        font-size: 12px;
      }

      body.dark-mode .features-content {
        background-color: #222831;
        color: #f0f0f0;
      }

      body.dark-mode .feature-item {
        background-color: #16213e;
      }

      body.dark-mode .feature-item-content h3 {
        color: #f0f0f0;
      }

      body.dark-mode .feature-item-content p {
        color: #aaa;
      }

      body.dark-mode .feature-item-icon {
        background-color: #2c3440;
      }

      @media (max-width: 768px) {
        .feature-list {
          grid-template-columns: 1fr;
        }
      }

      /* Chatbot styles */
      .chatbot-container {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1000;
        width: 350px;
        max-height: 500px;
        background-color: white;
        border-radius: var(--border-radius);
        box-shadow: var(--card-shadow-hover);
        overflow: hidden;
        display: flex;
        flex-direction: column;
        transition: all 0.3s ease;
        transform: translateY(100%);
        opacity: 0;
      }

      .chatbot-container.active {
        transform: translateY(0);
        opacity: 1;
      }

      .chatbot-header {
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--secondary-color)
        );
        color: white;
        padding: 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .chatbot-header h3 {
        margin: 0;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .chatbot-close {
        background: none;
        border: none;
        color: white;
        cursor: pointer;
        font-size: 16px;
      }

      .chatbot-messages {
        padding: 15px;
        overflow-y: auto;
        flex-grow: 1;
        max-height: 350px;
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .message {
        padding: 10px 15px;
        border-radius: 15px;
        max-width: 80%;
        word-wrap: break-word;
      }

      .bot-message {
        background-color: var(--background-light);
        align-self: flex-start;
        border-bottom-left-radius: 5px;
      }

      .user-message {
        background: linear-gradient(
          135deg,
          var(--primary-light),
          var(--secondary-color)
        );
        color: white;
        align-self: flex-end;
        border-bottom-right-radius: 5px;
      }

      .chatbot-input {
        display: flex;
        padding: 10px;
        border-top: 1px solid var(--background-dark);
      }

      .chatbot-input input {
        flex-grow: 1;
        padding: 10px;
        border: 1px solid var(--background-dark);
        border-radius: 20px;
        margin-right: 10px;
        outline: none;
      }

      .chatbot-input button {
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--secondary-color)
        );
        color: white;
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .chatbot-toggle {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 999;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--secondary-color)
        );
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: var(--card-shadow);
        transition: all 0.3s ease;
      }

      .chatbot-toggle:hover {
        transform: scale(1.1);
        box-shadow: var(--card-shadow-hover);
      }

      body.dark-mode .chatbot-container {
        background-color: #222831;
        color: #f0f0f0;
      }

      body.dark-mode .bot-message {
        background-color: #16213e;
      }

      body.dark-mode .chatbot-input input {
        background-color: #2c3440;
        color: #f0f0f0;
        border-color: #0f3460;
      }

      /* Initialization styles */
      .initialize-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.9),
          rgba(240, 255, 250, 0.9)
        );
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 50;
        transition: opacity 0.5s ease, visibility 0.5s ease;
      }

      .initialize-container {
        text-align: center;
        max-width: 600px;
        padding: 40px;
        background-color: white;
        border-radius: var(--border-radius);
        box-shadow: var(--card-shadow-hover);
        animation: fadeInUp 0.8s ease-out;
      }

      .initialize-container h2 {
        color: var(--primary-dark);
        font-size: 2rem;
        margin-bottom: 20px;
      }

      .initialize-container p {
        color: var(--text-color);
        font-size: 1.1rem;
        margin-bottom: 30px;
        line-height: 1.6;
      }

      .initialize-button {
        padding: 15px 40px;
        background: linear-gradient(
          45deg,
          var(--primary-color),
          var(--secondary-color)
        );
        color: white;
        border: none;
        border-radius: 30px;
        font-size: 1.2rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(46, 204, 113, 0.3);
        display: inline-flex;
        align-items: center;
        gap: 10px;
      }

      .initialize-button:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(46, 204, 113, 0.4);
      }

      .initialize-button i {
        font-size: 1.3rem;
      }

      .content-hidden {
        display: none;
      }

      .initialization-complete .content-hidden {
        display: block;
        animation: fadeIn 0.8s ease-out;
      }

      .initialization-complete .initialize-overlay {
        opacity: 0;
        visibility: hidden;
      }

      body.dark-mode .initialize-overlay {
        background: linear-gradient(
          135deg,
          rgba(18, 18, 30, 0.9),
          rgba(22, 33, 62, 0.9)
        );
      }

      body.dark-mode .initialize-container {
        background-color: #222831;
      }

      body.dark-mode .initialize-container h2,
      body.dark-mode .initialize-container p {
        color: #f0f0f0;
      }

      @keyframes initialLoaderSpin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .initial-loader {
        display: none;
        margin: 0 auto 20px;
        width: 60px;
        height: 60px;
        border: 5px solid var(--primary-light);
        border-radius: 50%;
        border-top-color: var(--primary-color);
        animation: initialLoaderSpin 1s linear infinite;
      }

      .initializing .initial-loader {
        display: block;
      }

      .initializing .initialize-button {
        opacity: 0.7;
        pointer-events: none;
      }

      /* Rocket launch animation styles */
      .launch-btn {
        position: relative;
        overflow: hidden;
      }

      .launch-btn i {
        transition: transform 0.5s ease;
      }

      .launch-btn.launching i {
        animation: rocketLaunch 2s ease-in-out forwards;
      }

      .launch-btn::after {
        content: "";
        position: absolute;
        bottom: -50px;
        left: calc(50% - 10px);
        width: 20px;
        height: 50px;
        background: linear-gradient(
          to bottom,
          rgba(255, 165, 0, 0.8),
          rgba(255, 69, 0, 0.4),
          transparent
        );
        opacity: 0;
        transition: opacity 0.3s ease;
        clip-path: polygon(0 0, 50% 100%, 100% 0);
      }

      .launch-btn.launching::after {
        animation: rocketFlame 2s ease-in-out forwards;
      }

      @keyframes rocketLaunch {
        0% {
          transform: translateY(0) rotate(0deg);
        }
        10% {
          transform: translateY(2px) rotate(-5deg);
        }
        20% {
          transform: translateY(-2px) rotate(5deg);
        }
        30% {
          transform: translateY(0) rotate(0deg);
        }
        50% {
          transform: translateY(0) scale(1.2);
        }
        100% {
          transform: translateY(-500px) scale(0.5);
        }
      }

      @keyframes rocketFlame {
        0% {
          opacity: 0;
          bottom: -50px;
        }
        10% {
          opacity: 0.7;
          bottom: -20px;
        }
        50% {
          opacity: 1;
          bottom: -10px;
          height: 70px;
        }
        90% {
          opacity: 0.3;
          height: 100px;
        }
        100% {
          opacity: 0;
          bottom: -50px;
        }
      }

      /* Trail effect particles */
      .particle {
        position: absolute;
        background: rgba(255, 165, 0, 0.6);
        border-radius: 50%;
        pointer-events: none;
        z-index: -1;
      }

      /* Rocket loading animation */
      .launch-btn i {
        display: inline-block;
        transition: transform 0.3s ease;
      }

      .launch-btn.loading i {
        animation: rocketLoading 1.5s infinite ease-in-out;
      }

      @keyframes rocketLoading {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-5px);
        }
      }

      /* Flame effect */
      .launch-btn.loading::after {
        content: "";
        display: block;
        position: absolute;
        bottom: 8px;
        left: 0;
        right: 0;
        margin: 0 auto;
        width: 10px;
        height: 8px;
        background: linear-gradient(to bottom, #ff7e00, transparent);
        border-radius: 50% 50% 0 0;
        transform: translateY(10px);
        opacity: 0;
        animation: flameEffect 1.5s infinite ease-in-out;
      }

      @keyframes flameEffect {
        0%,
        100% {
          opacity: 0;
          transform: translateY(10px) scale(0.8);
        }
        50% {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      /* Status indicator dark mode fix */
      body.dark-mode .status-indicator {
        background-color: rgba(0, 0, 0, 0.2);
        color: rgba(255, 255, 255, 0.9);
      }

      body.dark-mode .status-dot.online {
        background-color: #00c853;
        box-shadow: 0 0 5px #00c853;
      }

      body.dark-mode .status-dot.offline {
        background-color: #ff3d00;
        box-shadow: 0 0 5px #ff3d00;
      }

      /* Dark mode text and confidence bar visibility fixes */
      body.dark-mode #map-container p,
      body.dark-mode .webcam-info h4,
      body.dark-mode .webcam-info p {
        color: rgba(255, 255, 255, 0.9);
      }

      body.dark-mode .confidence-meter {
        background-color: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      body.dark-mode .confidence-label {
        color: rgba(255, 255, 255, 0.9);
      }

      body.dark-mode .confidence-bar {
        background-color: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
      }

      body.dark-mode .confidence-fill {
        background: linear-gradient(to right, #2196f3, #00c853);
      }

      body.dark-mode .confidence-value {
        color: rgba(255, 255, 255, 0.9);
      }

      body.dark-mode #recognition-result {
        color: rgba(255, 255, 255, 0.9);
        background-color: rgba(0, 0, 0, 0.3);
      }

      /* Webcam section text fix for dark mode */
      body.dark-mode #webcam-section h3,
      body.dark-mode #webcam-section p {
        color: rgba(255, 255, 255, 0.9) !important;
      }

      body.dark-mode .webcam-info-text h4,
      body.dark-mode .webcam-info-text p {
        color: rgba(255, 255, 255, 0.9) !important;
      }

      /* Adding !important to ensure these styles take precedence */
      body.dark-mode .webcam-wrap h3,
      body.dark-mode .webcam-wrap p {
        color: rgba(255, 255, 255, 0.9) !important;
      }

      body.dark-mode .webcam-container .webcam-info h3,
      body.dark-mode .webcam-container .webcam-info p {
        color: rgba(255, 255, 255, 0.9) !important;
      }

      /* Webcam section - make text black in dark mode */
      body.dark-mode #webcam-section h3,
      body.dark-mode #webcam-section p,
      body.dark-mode .webcam-info h4,
      body.dark-mode .webcam-info p,
      body.dark-mode .webcam-info-text h4,
      body.dark-mode .webcam-info-text p,
      body.dark-mode .webcam-wrap h3,
      body.dark-mode .webcam-wrap p,
      body.dark-mode .webcam-container .webcam-info h3,
      body.dark-mode .webcam-container .webcam-info p {
        color: rgba(0, 0, 0, 0.9) !important;
        background-color: rgba(255, 255, 255, 0.7) !important;
        padding: 5px 10px !important;
        border-radius: 4px !important;
        display: inline-block !important;
      }

      /* Make sure the container background contrasts well with black text */
      body.dark-mode .webcam-info,
      body.dark-mode .webcam-info-text {
        background-color: rgba(255, 255, 255, 0.1) !important;
        padding: 10px !important;
        border-radius: 8px !important;
      }

      /* Recognition Confidence text fix for dark mode */
      body.dark-mode .confidence-meter,
      body.dark-mode .confidence-label,
      body.dark-mode .confidence-value,
      body.dark-mode #recognition-result {
        color: rgba(0, 0, 0, 0.9) !important;
        background-color: rgba(255, 255, 255, 0.7) !important;
        border-radius: 4px !important;
      }

      body.dark-mode .confidence-label {
        padding: 3px 8px !important;
        display: inline-block !important;
        margin-right: 5px !important;
      }

      body.dark-mode .confidence-value {
        padding: 3px 8px !important;
        display: inline-block !important;
      }

      body.dark-mode .confidence-bar {
        background-color: rgba(200, 200, 200, 0.5) !important;
        border: 1px solid rgba(0, 0, 0, 0.2) !important;
      }

      body.dark-mode .confidence-fill {
        background: linear-gradient(to right, #2196f3, #00c853) !important;
      }

      body.dark-mode #recognition-result {
        padding: 5px 10px !important;
        margin-top: 10px !important;
        display: inline-block !important;
      }

      /* Fix for recycling centers text in dark mode */
      body.dark-mode #map-container p,
      body.dark-mode #map-container h4 {
        color: rgba(0, 0, 0, 0.9) !important;
        background-color: rgba(255, 255, 255, 0.7) !important;
        padding: 5px 10px !important;
        border-radius: 4px !important;
        display: inline-block !important;
        margin: 5px 0 !important;
      }

      body.dark-mode #map-container div {
        background-color: rgba(255, 255, 255, 0.1) !important;
        border-radius: 8px !important;
      }

      body.dark-mode #directions-button {
        background: linear-gradient(
          45deg,
          var(--primary-color),
          var(--secondary-color)
        ) !important;
        color: white !important;
        border: none !important;
        padding: 8px 15px !important;
        margin-top: 10px !important;
        border-radius: 20px !important;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2) !important;
      }

      /* Map popup styles */
      .map-popup-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 9999;
        display: flex;
        justify-content: center;
        align-items: center;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
      }

      .map-popup-overlay.active {
        opacity: 1;
        pointer-events: auto;
      }

      .map-popup-container {
        width: 90%;
        height: 90%;
        background-color: white;
        border-radius: 8px;
        overflow: hidden;
        position: relative;
        display: flex;
        flex-direction: column;
        box-shadow: 0 5px 25px rgba(0, 0, 0, 0.3);
      }

      .map-popup-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px;
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--secondary-color)
        );
        color: white;
      }

      .map-popup-header h3 {
        margin: 0;
        font-size: 1.2rem;
      }

      .map-popup-close {
        background: none;
        border: none;
        color: white;
        font-size: 1.5rem;
        cursor: pointer;
        transition: transform 0.3s ease;
      }

      .map-popup-close:hover {
        transform: rotate(90deg);
      }

      .map-popup-content {
        flex: 1;
        overflow: hidden;
        position: relative;
      }

      .map-popup-iframe {
        width: 100%;
        height: 100%;
        border: none;
      }

      .map-popup-footer {
        padding: 15px;
        display: flex;
        justify-content: space-between;
        border-top: 1px solid #eee;
      }

      .map-popup-button {
        background: linear-gradient(
          45deg,
          var(--primary-color),
          var(--secondary-color)
        );
        color: white;
        border: none;
        border-radius: 20px;
        padding: 8px 15px;
        font-size: 14px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .map-popup-button:hover {
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        transform: translateY(-2px);
      }

      /* Dark mode support */
      body.dark-mode .map-popup-container {
        background-color: #222831;
        color: #f0f0f0;
      }

      body.dark-mode .map-popup-footer {
        border-top: 1px solid #16213e;
      }

      /* Animated Developer Credit */
      .developer-credit {
        position: relative;
        padding: 12px 0;
        text-align: center;
        border-top: 1px solid rgba(var(--primary-rgb), 0.2);
        margin-top: 20px;
        overflow: visible; /* Changed from hidden to visible */
      }

      .developer-info {
        position: relative;
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 8px 20px;
        background: linear-gradient(
          90deg,
          rgba(var(--primary-rgb), 0.05),
          rgba(var(--secondary-rgb), 0.1),
          rgba(var(--primary-rgb), 0.05)
        );
        border-radius: 50px;
        z-index: 1;
        transition: all 0.3s ease;
      }

      .developer-info:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .developer-info:hover .leaf {
        transform: rotate(20deg) scale(1.2);
      }

      .developer-avatar {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--secondary-color)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        font-size: 16px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        position: relative;
        overflow: hidden;
      }

      .developer-name {
        font-size: 0.9rem;
        font-weight: 500;
        background: linear-gradient(
          45deg,
          var(--primary-color),
          var(--secondary-color)
        );
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        letter-spacing: 0.5px;
        position: relative;
      }

      .leaf {
        position: absolute;
        color: var(--primary-color);
        font-size: 12px;
        transition: all 0.5s ease;
      }

      .leaf-1 {
        top: -5px;
        left: 5px;
        transform: rotate(-15deg);
        animation: floatLeaf 3s ease-in-out infinite;
      }

      .leaf-2 {
        bottom: -4px;
        right: 8px;
        transform: rotate(15deg);
        animation: floatLeaf 3s ease-in-out infinite 0.5s;
      }

      .developer-glow {
        position: absolute;
        width: 100%;
        height: 3px;
        bottom: 0;
        left: 0;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(var(--primary-rgb), 0.5),
          rgba(var(--secondary-rgb), 0.5),
          transparent
        );
        animation: glowFlow 6s linear infinite;
      }

      .eco-badge {
        display: inline-flex;
        align-items: center;
        padding: 3px 8px;
        border-radius: 12px;
        background-color: rgba(40, 167, 69, 0.1);
        color: #28a745;
        font-size: 0.7rem;
        font-weight: 600;
        margin-left: 5px;
        border: 1px dashed rgba(40, 167, 69, 0.3);
      }

      .eco-badge i {
        font-size: 0.65rem;
        margin-right: 3px;
      }

      @keyframes floatLeaf {
        0%,
        100% {
          transform: translateY(0) rotate(0deg);
        }
        50% {
          transform: translateY(-3px) rotate(15deg);
        }
      }

      @keyframes glowFlow {
        0% {
          background-position: -300px 0;
        }
        100% {
          background-position: 300px 0;
        }
      }

      /* Particle animation for the developer credit */
      .eco-particles {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        z-index: 0;
      }

      .eco-particle {
        position: absolute;
        bottom: -10px;
        background-color: rgba(var(--primary-rgb), 0.2);
        border-radius: 50%;
        animation: floatUp 10s linear infinite;
      }

      @keyframes floatUp {
        0% {
          transform: translateY(0) rotate(0);
          opacity: 0;
        }
        10% {
          opacity: 1;
        }
        90% {
          opacity: 1;
        }
        100% {
          transform: translateY(-100px) rotate(360deg);
          opacity: 0;
        }
      }

      /* Dark mode support */
      body.dark-mode .developer-info {
        background: linear-gradient(
          90deg,
          rgba(255, 255, 255, 0.03),
          rgba(255, 255, 255, 0.08),
          rgba(255, 255, 255, 0.03)
        );
      }

      body.dark-mode .developer-name {
        background: linear-gradient(45deg, #86efac, #38bdf8);
        -webkit-background-clip: text;
        background-clip: text;
      }

      body.dark-mode .eco-badge {
        background-color: rgba(40, 167, 69, 0.15);
        color: #4ade80;
        border-color: rgba(74, 222, 128, 0.3);
      }

      body.dark-mode .eco-particle {
        background-color: rgba(255, 255, 255, 0.1);
      }

      /* Enhanced Developer Credit with Skills Hover */
      .developer-credit {
        position: relative;
        padding: 12px 0;
        text-align: center;
        border-top: 1px solid rgba(var(--primary-rgb), 0.2);
        margin-top: 20px;
        overflow: visible; /* Changed from hidden to visible */
      }

      .developer-info {
        position: relative;
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 8px 20px;
        background: linear-gradient(
          90deg,
          rgba(var(--primary-rgb), 0.05),
          rgba(var(--secondary-rgb), 0.1),
          rgba(var(--primary-rgb), 0.05)
        );
        border-radius: 50px;
        z-index: 1;
        transition: all 0.3s ease;
      }

      .developer-info:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .developer-avatar {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--secondary-color)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        font-size: 16px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        position: relative;
        overflow: hidden;
      }

      .developer-name {
        font-size: 0.9rem;
        font-weight: 500;
        background: linear-gradient(
          45deg,
          var(--primary-color),
          var(--secondary-color)
        );
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        letter-spacing: 0.5px;
        position: relative;
      }

      /* Skills display on hover */
      .developer-skills {
        position: absolute;
        top: -100px;
        left: 50%;
        transform: translateX(-50%) scale(0.8);
        background: white;
        border-radius: 8px;
        padding: 12px 20px;
        box-shadow: 0 5px 25px rgba(0, 0, 0, 0.15);
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        width: 300px;
        z-index: 100;
      }

      .developer-info:hover .developer-skills {
        top: -120px;
        opacity: 1;
        visibility: visible;
        transform: translateX(-50%) scale(1);
      }

      .developer-skills::after {
        content: "";
        position: absolute;
        bottom: -8px;
        left: 50%;
        transform: translateX(-50%);
        border-left: 8px solid transparent;
        border-right: 8px solid transparent;
        border-top: 8px solid white;
      }

      .skill-title {
        color: var(--primary-dark);
        font-weight: 600;
        font-size: 0.9rem;
        margin-bottom: 8px;
        text-align: center;
      }

      .skills-container {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        justify-content: center;
      }

      .skill-badge {
        font-size: 0.7rem;
        padding: 4px 8px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        gap: 4px;
        animation: skillFadeIn 0.3s ease forwards;
        opacity: 0;
      }

      @keyframes skillFadeIn {
        from {
          opacity: 0;
          transform: translateY(5px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .skill-badge i {
        font-size: 0.8rem;
      }

      .skill-frontend {
        background-color: #e3f2fd;
        color: #1976d2;
        border: 1px solid #bbdefb;
      }

      .skill-backend {
        background-color: #e8f5e9;
        color: #388e3c;
        border: 1px solid #c8e6c9;
      }

      .skill-database {
        background-color: #ede7f6;
        color: #5e35b1;
        border: 1px solid #d1c4e9;
      }

      .skill-design {
        background-color: #fff8e1;
        color: #ff8f00;
        border: 1px solid #ffe082;
      }

      .skill-api {
        background-color: #f3e5f5;
        color: #8e24aa;
        border: 1px solid #e1bee7;
      }

      .skill-eco {
        background-color: #e8f5e9;
        color: #2e7d32;
        border: 1px solid #a5d6a7;
      }

      /* Eco message popup */
      .eco-message {
        position: fixed;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%) translateY(100px);
        padding: 15px 25px;
        background: linear-gradient(135deg, #43a047, #66bb6a);
        color: white;
        border-radius: 50px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        display: flex;
        align-items: center;
        gap: 12px;
        z-index: 9998; /* Just below the skills overlay */
        opacity: 0;
        transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        pointer-events: none;
        max-width: 90%;
      }

      .eco-message.show {
        transform: translateX(-50%) translateY(0);
        opacity: 1;
      }

      .eco-message i {
        font-size: 1.5rem;
        animation: pulse 2s infinite;
      }

      .eco-message-text {
        font-weight: 500;
        letter-spacing: 0.5px;
        line-height: 1.4;
        position: relative;
      }

      .eco-message-text::before {
        content: "";
        position: absolute;
        bottom: -2px;
        left: 0;
        width: 100%;
        height: 1px;
        background: rgba(255, 255, 255, 0.5);
        animation: lineGrow 3s infinite;
      }

      @keyframes lineGrow {
        0%,
        100% {
          width: 0;
        }
        50% {
          width: 100%;
        }
      }

      /* Dark mode support */
      body.dark-mode .developer-skills {
        background: #222831;
      }

      body.dark-mode .developer-skills::after {
        border-top-color: #222831;
      }

      body.dark-mode .skill-title {
        color: #e0e0e0;
      }

      body.dark-mode .skill-frontend {
        background-color: rgba(25, 118, 210, 0.2);
        color: #90caf9;
        border-color: rgba(25, 118, 210, 0.3);
      }

      body.dark-mode .skill-backend {
        background-color: rgba(56, 142, 60, 0.2);
        color: #a5d6a7;
        border-color: rgba(56, 142, 60, 0.3);
      }

      body.dark-mode .skill-database {
        background-color: rgba(94, 53, 177, 0.2);
        color: #b39ddb;
        border-color: rgba(94, 53, 177, 0.3);
      }

      body.dark-mode .skill-design {
        background-color: rgba(255, 143, 0, 0.2);
        color: #ffe082;
        border-color: rgba(255, 143, 0, 0.3);
      }

      body.dark-mode .skill-api {
        background-color: rgba(142, 36, 170, 0.2);
        color: #e1bee7;
        border-color: rgba(142, 36, 170, 0.3);
      }

      body.dark-mode .skill-eco {
        background-color: rgba(46, 125, 50, 0.2);
        color: #a5d6a7;
        border-color: rgba(46, 125, 50, 0.3);
      }

      /* Fixed Skills display to overlay properly */
      .developer-skills-overlay {
        position: fixed; /* Changed from absolute to fixed */
        bottom: 85px; /* Position from bottom instead of top */
        left: 50%;
        transform: translateX(-50%) scale(0.8);
        background: white;
        border-radius: 8px;
        padding: 15px 20px;
        box-shadow: 0 5px 25px rgba(0, 0, 0, 0.2);
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        width: 320px;
        z-index: 9999; /* Increased z-index to ensure it's above all content */
      }

      .developer-info:hover .developer-skills-overlay {
        opacity: 1;
        visibility: visible;
        transform: translateX(-50%) scale(1);
        bottom: 95px; /* Adjusted position when visible */
      }

      .developer-skills-overlay::after {
        content: "";
        position: absolute;
        bottom: -8px;
        left: 50%;
        transform: translateX(-50%);
        border-left: 8px solid transparent;
        border-right: 8px solid transparent;
        border-top: 8px solid white;
      }

      /* Skills title with animation */
      .skill-title {
        color: var(--primary-dark);
        font-weight: 600;
        font-size: 1rem;
        margin-bottom: 10px;
        text-align: center;
        position: relative;
        padding-bottom: 5px;
      }

      .skill-title::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 50%;
        height: 2px;
        background: linear-gradient(
          90deg,
          transparent,
          var(--primary-color),
          transparent
        );
      }

      .code-icon {
        font-size: 16px;
        color: white;
        animation: codeIcon 3s ease-in-out infinite;
      }

      @keyframes codeIcon {
        0%,
        100% {
          transform: scale(1);
          opacity: 1;
        }
        50% {
          transform: scale(1.2);
          opacity: 0.9;
        }
      }

      .developer-avatar .leaf {
        font-size: 10px;
      }

      /* Enhanced hover effect for coding icon */
      .developer-info:hover .code-icon {
        animation: codeIconHover 1s ease-in-out;
      }

      @keyframes codeIconHover {
        0% {
          transform: scale(1) rotate(0deg);
        }
        50% {
          transform: scale(1.3) rotate(180deg);
        }
        100% {
          transform: scale(1) rotate(360deg);
        }
      }

      /* Dark mode support */
      body.dark-mode .code-icon {
        color: #e0e0e0;
        text-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
      }
    </style>
    <!-- Font Awesome for icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
    />
  </head>
  <body>
    <div class="theme-switch" id="theme-switch">
      <i class="fas fa-moon"></i>
    </div>

    <div class="keyboard-shortcuts" id="keyboard-shortcuts">
      <h4>Keyboard Shortcuts</h4>
      <ul>
        <li><span class="key">/</span> Focus search</li>
        <li><span class="key">Enter</span> Search</li>
        <li><span class="key">Esc</span> Clear search</li>
        <li><span class="key">?</span> Toggle shortcuts</li>
        <li><span class="key">D</span> Toggle dark mode</li>
      </ul>
    </div>

    <header>
      <div class="container header-content">
        <div class="logo">
          <div class="logo-icon">
            <span class="recycling-symbol"><i class="fas fa-recycle"></i></span>
          </div>
          <h1>Recycle Guide</h1>
        </div>
        <div class="right-section">
          <div class="status-indicator">
            <div class="status-dot online" id="status-dot"></div>
            <span id="status-text">Online</span>
          </div>
          <button id="show-features-btn" class="features-button">
            <i class="fas fa-th-list"></i> Features
          </button>
        </div>
      </div>
    </header>

    <!-- Add this right after the header -->
    <div class="initialize-overlay" id="initialize-overlay">
      <div class="initialize-container">
        <h2>Welcome to Recycle Guide</h2>
        <p>
          Your intelligent recycling assistant powered by AI. Get detailed
          information about recycling almost anything, identify items with your
          camera, find recycling centers, and more.
        </p>
        <div class="initial-loader" id="initial-loader"></div>
        <button id="initialize-button" class="initialize-button">
          <i class="fas fa-rocket"></i> Launch Application
        </button>
      </div>
    </div>

    <main class="container content-hidden">
      <section class="hero">
        <div class="hero-content">
          <h2>Your Ultimate Recycling Intelligence</h2>
          <p>
            Get AI-powered instructions on how to recycle almost anything.
            Simply search for an item and receive personalized recycling
            guidance.
          </p>
          <div class="search-container">
            <input
              type="text"
              id="search-input"
              class="search-input"
              placeholder="Search for an item (e.g., plastic bottle, batteries, cardboard)"
            />
            <button id="search-button" class="search-button">Search</button>
            <button id="voice-search" class="voice-search">
              <i class="fas fa-microphone"></i>
            </button>
          </div>
        </div>
      </section>

      <div id="error-message" class="error-message">
        <p>Sorry, we couldn't process your request. Please try again later.</p>
      </div>

      <div id="loader" class="loader" style="display: none">
        <div class="advanced-loader">
          <div class="loader-icon">
            <i class="fas fa-recycle"></i>
            <div class="loader-icon-inner">
              <i class="fas fa-leaf"></i>
            </div>
          </div>
          <div class="loader-text">
            <span id="loader-text-dynamic"></span>
          </div>
        </div>
      </div>

      <section id="results-section" class="results-section">
        <div class="results-card">
          <div class="results-header">
            <h2 class="results-title" id="result-item-name">Item Name</h2>
            <div id="recyclable-badge" class="recyclable-badge recyclable-yes">
              Recyclable
            </div>
          </div>

          <div class="info-grid">
            <div class="info-card">
              <h3><span class="card-icon">🧹</span> Preparation</h3>
              <p id="preparation">Loading...</p>
            </div>

            <div class="info-card">
              <h3><span class="card-icon">⚠️</span> Special Instructions</h3>
              <p id="special-instructions">Loading...</p>
            </div>

            <div class="info-card">
              <h3><span class="card-icon">🌍</span> Environmental Impact</h3>
              <p id="environmental-impact">Loading...</p>
            </div>

            <div class="info-card">
              <h3>
                <span class="card-icon">🔄</span> Eco-Friendly Alternatives
              </h3>
              <p id="alternatives">Loading...</p>
            </div>
          </div>

          <div class="info-card" style="margin-top: 20px">
            <h3><span class="card-icon">💡</span> General Tips</h3>
            <p id="general-tips">Loading...</p>
          </div>

          <div id="impact-section" class="impact-section">
            <h3>Environmental Impact Metrics</h3>
            <div class="impact-grid">
              <div class="impact-stat">
                <div class="stat-value" id="carbon-saved">0 kg</div>
                <div class="stat-label">CO₂ Saved</div>
              </div>
              <div class="impact-stat">
                <div class="stat-value" id="energy-saved">0 kWh</div>
                <div class="stat-label">Energy Saved</div>
              </div>
              <div class="impact-stat">
                <div class="stat-value" id="water-saved">0 L</div>
                <div class="stat-label">Water Saved</div>
              </div>
            </div>
            <div class="chart-container">
              <canvas id="impact-chart"></canvas>
            </div>
          </div>

          <div id="map-section" class="map-section">
            <h3>Nearby Recycling Locations</h3>
            <div id="map-container" class="map-container"></div>
          </div>
        </div>
      </section>

      <section class="tips-carousel">
        <h3>Recycling Tips & Facts</h3>
        <div class="tips-container">
          <div class="tip-card">
            <h4>Plastic Recycling Tip</h4>
            <p>
              Rinse plastic containers before recycling to remove food residue.
              This prevents contamination and improves recycling efficiency.
            </p>
          </div>
          <div class="tip-card">
            <h4>Did You Know?</h4>
            <p>
              Recycling one aluminum can saves enough energy to run a TV for
              three hours or a 100-watt bulb for 20 hours.
            </p>
          </div>
          <div class="tip-card">
            <h4>Paper Recycling Fact</h4>
            <p>
              Recycling a stack of paper just 3 feet high saves one tree. The
              average American uses seven trees per year in paper products.
            </p>
          </div>
          <div class="tip-card">
            <h4>Glass Recycling Tip</h4>
            <p>
              Glass can be recycled endlessly without loss of quality or purity,
              making it one of the most sustainable materials.
            </p>
          </div>
          <div class="tip-card">
            <h4>Electronics Disposal</h4>
            <p>
              E-waste contains valuable materials like gold and copper that can
              be recovered and reused through proper recycling channels.
            </p>
          </div>
          <div class="tip-card">
            <h4>Composting Benefit</h4>
            <p>
              Composting food waste can reduce your household waste by up to 30%
              while creating nutrient-rich soil for gardening.
            </p>
          </div>
        </div>
      </section>

      <section id="webcam-section" class="webcam-section">
        <div class="webcam-container">
          <h3>Identify Items with Camera</h3>
          <p>
            Point your camera at an item to automatically identify and get
            recycling information
          </p>
          <div class="webcam-wrapper" id="webcam-wrapper">
            <video
              id="webcam-feed"
              class="webcam-feed"
              autoplay
              playsinline
            ></video>
            <div class="webcam-overlay" id="webcam-overlay">
              <div class="scanning-line"></div>
            </div>
            <div class="recognition-result" id="recognition-result">
              Analyzing...
            </div>
          </div>
          <div class="webcam-controls">
            <button id="capture-button" class="webcam-button">
              <i class="fas fa-camera"></i> Start Camera
            </button>
            <button id="stop-webcam" class="webcam-button stop">
              <i class="fas fa-times"></i> Close Camera
            </button>
          </div>
          <div class="confidence-meter">
            <div class="confidence-label">Recognition Confidence:</div>
            <div class="confidence-bar">
              <div class="confidence-fill" id="confidence-fill"></div>
            </div>
            <div class="confidence-value" id="confidence-value">0%</div>
          </div>
        </div>
      </section>

      <section class="common-items">
        <h2>Common Recyclable Items</h2>
        <div id="items-grid" class="items-grid">
          <!-- Items will be populated dynamically -->
        </div>
      </section>
    </main>

    <footer class="content-hidden">
      <div class="container footer-content">
        <div class="logo">
          <div class="logo-icon">♻️</div>
          <h1>EcoSort AI</h1>
        </div>
        <div class="footer-links">
          <a href="#">Home</a>
          <a href="#">About</a>
          <a href="#">Contact</a>
          <a href="#">Privacy Policy</a>
          <a href="#">FAQ</a>
          <a href="#">Recycling Centers</a>
        </div>
        <div class="social-links">
          <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
          <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
          <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
          <a href="#" class="social-icon"><i class="fab fa-linkedin-in"></i></a>
        </div>
        <p class="copyright">
          © 2025 Recycle Guide AI Technologies. All rights reserved.
        </p>
        <div class="developer-credit">
          <div class="eco-particles" id="eco-particles"></div>
          <div class="developer-info">
            <div class="developer-avatar">
              <i class="fas fa-code code-icon"></i>
              <i class="fas fa-leaf leaf leaf-1"></i>
              <i class="fas fa-leaf leaf leaf-2"></i>
            </div>
            <div class="developer-name">
              Developed by Himanshu Raj
              <span class="eco-badge"
                ><i class="fas fa-seedling"></i>Eco-Friendly</span
              >
            </div>
            <div class="developer-glow"></div>

            <!-- Skills Overlay (moved outside to fix z-index issues) -->
            <div class="developer-skills-overlay">
              <div class="skill-title">Himanshu's Contributions</div>
              <div class="skills-container">
                <span class="skill-badge skill-frontend"
                  ><i class="fas fa-laptop-code"></i>Frontend Development</span
                >
                <span class="skill-badge skill-backend"
                  ><i class="fas fa-server"></i>Backend Integration</span
                >
                <span class="skill-badge skill-api"
                  ><i class="fas fa-plug"></i>API Integration</span
                >
                <span class="skill-badge skill-database"
                  ><i class="fas fa-database"></i>Data Management</span
                >
                <span class="skill-badge skill-design"
                  ><i class="fas fa-paint-brush"></i>UI/UX Design</span
                >
                <span class="skill-badge skill-eco"
                  ><i class="fas fa-leaf"></i>Eco Optimization</span
                >
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <!-- Eco Message Popup -->
    <div class="eco-message" id="eco-message">
      <i class="fas fa-globe-americas"></i>
      <span class="eco-message-text"
        >Together we can make Earth greener! Small changes create big
        impacts.</span
      >
    </div>

    <!-- Advanced JavaScript with more features -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const searchInput = document.getElementById("search-input");
        const searchButton = document.getElementById("search-button");
        const voiceSearchButton = document.getElementById("voice-search");
        const resultsSection = document.getElementById("results-section");
        const loader = document.getElementById("loader");
        const errorMessage = document.getElementById("error-message");
        const itemsGrid = document.getElementById("items-grid");
        const impactSection = document.getElementById("impact-section");
        const mapSection = document.getElementById("map-section");
        const themeSwitch = document.getElementById("theme-switch");
        const keyboardShortcuts = document.getElementById("keyboard-shortcuts");
        const webcamSection = document.getElementById("webcam-section");
        const webcamFeed = document.getElementById("webcam-feed");
        const captureButton = document.getElementById("capture-button");
        const stopWebcamButton = document.getElementById("stop-webcam");

        // Elements for displaying results
        const resultItemName = document.getElementById("result-item-name");
        const recyclableBadge = document.getElementById("recyclable-badge");
        const preparation = document.getElementById("preparation");
        const specialInstructions = document.getElementById(
          "special-instructions"
        );
        const environmentalImpact = document.getElementById(
          "environmental-impact"
        );
        const alternatives = document.getElementById("alternatives");
        const generalTips = document.getElementById("general-tips");
        const carbonSaved = document.getElementById("carbon-saved");
        const energySaved = document.getElementById("energy-saved");
        const waterSaved = document.getElementById("water-saved");

        // Common items with icons
        const commonItems = [
          {
            name: "Plastic bottles",
            category: "Plastic",
            icon: "fas fa-wine-bottle",
          },
          { name: "Cardboard", category: "Paper", icon: "fas fa-box" },
          { name: "Aluminum cans", category: "Metal", icon: "fas fa-can-food" },
          {
            name: "Glass bottles",
            category: "Glass",
            icon: "fas fa-glass-whiskey",
          },
          { name: "Newspapers", category: "Paper", icon: "fas fa-newspaper" },
          { name: "Electronics", category: "E-waste", icon: "fas fa-laptop" },
          {
            name: "Batteries",
            category: "Hazardous",
            icon: "fas fa-battery-half",
          },
          { name: "Food waste", category: "Organic", icon: "fas fa-apple-alt" },
          { name: "Clothing", category: "Textiles", icon: "fas fa-tshirt" },
          { name: "Styrofoam", category: "Plastic", icon: "fas fa-box" },
        ];

        // Populate common items with FontAwesome icons
        commonItems.forEach((item) => {
          const itemCard = document.createElement("div");
          itemCard.className = "item-card";
          itemCard.innerHTML = `
                    <div class="item-icon"><i class="${
                      item.icon || "fas fa-recycle"
                    }"></i></div>
                    <h3>${item.name}</h3>
                    <p>${item.category}</p>
                `;

          // Add click event with animation
          itemCard.addEventListener("click", function () {
            this.style.animation = "pulse 0.5s";
            setTimeout(() => {
              this.style.animation = "";
            }, 500);

            searchInput.value = item.name;
            searchRecyclingInfo(item.name);
          });

          itemsGrid.appendChild(itemCard);
        });

        // Advanced search button click event with animation
        searchButton.addEventListener("click", function () {
          this.style.animation = "pulse 0.3s";
          setTimeout(() => {
            this.style.animation = "";
          }, 300);

          const searchTerm = searchInput.value.trim();
          if (searchTerm) {
            searchRecyclingInfo(searchTerm);
            saveToSearchHistory(searchTerm);
          }
        });

        // Enter key press event
        searchInput.addEventListener("keypress", function (e) {
          if (e.key === "Enter") {
            const searchTerm = searchInput.value.trim();
            if (searchTerm) {
              searchRecyclingInfo(searchTerm);
              saveToSearchHistory(searchTerm);
            }
          }
        });

        // Voice search functionality
        voiceSearchButton.addEventListener("click", function () {
          if ("webkitSpeechRecognition" in window) {
            const recognition = new webkitSpeechRecognition();
            recognition.lang = "en-US";

            // Animation for voice button
            this.style.animation = "pulse 2s infinite";
            this.innerHTML = '<i class="fas fa-microphone-alt"></i>';

            recognition.start();

            recognition.onresult = function (event) {
              const transcript = event.results[0][0].transcript;
              searchInput.value = transcript;
              voiceSearchButton.style.animation = "";
              voiceSearchButton.innerHTML = '<i class="fas fa-microphone"></i>';

              // Auto search after voice input
              searchRecyclingInfo(transcript);
              saveToSearchHistory(transcript);
            };

            recognition.onerror = function () {
              voiceSearchButton.style.animation = "";
              voiceSearchButton.innerHTML = '<i class="fas fa-microphone"></i>';
              alert(
                "Voice recognition failed. Please try again or type your query."
              );
            };

            recognition.onend = function () {
              voiceSearchButton.style.animation = "";
              voiceSearchButton.innerHTML = '<i class="fas fa-microphone"></i>';
            };
          } else {
            alert(
              "Sorry, voice recognition is not supported in your browser. Please try using Chrome."
            );
          }
        });

        // Save search history to localStorage
        function saveToSearchHistory(term) {
          let searchHistory =
            JSON.parse(localStorage.getItem("searchHistory")) || [];
          // Don't add duplicates
          if (!searchHistory.includes(term)) {
            searchHistory.unshift(term);
            // Keep only last 10 searches
            if (searchHistory.length > 10) {
              searchHistory = searchHistory.slice(0, 10);
            }
            localStorage.setItem(
              "searchHistory",
              JSON.stringify(searchHistory)
            );
          }
        }

        // Function to search for recycling information with Mistral API
        function searchRecyclingInfo(item) {
          // Show loader with animation, hide error and results
          loader.style.display = "block";
          errorMessage.style.display = "none";
          resultsSection.style.display = "none";

          // Scroll to loader
          loader.scrollIntoView({ behavior: "smooth" });

          // First try to use our local database for common items
          const lowercaseItem = item.toLowerCase();
          let useLocalData = false;

          if (
            lowercaseItem.includes("plastic") ||
            lowercaseItem.includes("paper") ||
            lowercaseItem.includes("cardboard") ||
            lowercaseItem.includes("newspaper") ||
            lowercaseItem.includes("glass") ||
            lowercaseItem.includes("aluminum") ||
            lowercaseItem.includes("metal") ||
            lowercaseItem.includes("can") ||
            lowercaseItem.includes("electronic") ||
            lowercaseItem.includes("device") ||
            lowercaseItem.includes("phone") ||
            lowercaseItem.includes("computer") ||
            lowercaseItem.includes("battery") ||
            lowercaseItem.includes("batteries") ||
            lowercaseItem.includes("food") ||
            lowercaseItem.includes("organic") ||
            lowercaseItem.includes("compost") ||
            lowercaseItem.includes("clothing") ||
            lowercaseItem.includes("textile") ||
            lowercaseItem.includes("fabric") ||
            lowercaseItem.includes("styrofoam")
          ) {
            useLocalData = true;
            const info = generateRecyclingInfo(item);

            // Small delay to show loader for a moment
            setTimeout(() => {
              updateResultsUI(item, info);
              updateImpactMetrics(item, info);
              impactSection.style.display = "block";
              showRecyclingLocations(item);
              mapSection.style.display = "block";
              resultsSection.style.display = "block";
              resultsSection.style.animation = "fadeIn 0.5s ease";
              loader.style.display = "none";
              resultsSection.scrollIntoView({ behavior: "smooth" });
            }, 800);

            return;
          }

          // For other items, use the Mistral API
          const apiUrl = "https://api.mistral.ai/v1/chat/completions";
          const apiKey = "YOUR-API-KEY"; // This key will be securely stored on server-side in production

          const prompt = `I need comprehensive recycling information about "${item}". Please provide:
                1. Whether it is recyclable (use one of these exact values: true, false, "Partial", "Special", "Compostable", "Reusable", "Rarely")
                2. Preparation instructions for recycling
                3. Special instructions or considerations
                4. Environmental impact of improper disposal
                5. Eco-friendly alternatives
                6. General recycling tips related to this item
                
                Format your response as a JSON object with keys: recyclable, preparation, specialInstructions, environmentalImpact, alternatives, and generalTips.
                Make sure the recyclable value is either a boolean (true/false) or one of the specified string values.`;

          const requestBody = {
            model: "mistral-medium",
            messages: [{ role: "user", content: prompt }],
            temperature: 0.4,
            max_tokens: 1000,
          };

          // Make API call to Mistral
          fetch(apiUrl, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${apiKey}`,
            },
            body: JSON.stringify(requestBody),
          })
            .then((response) => {
              if (!response.ok) {
                throw new Error("API request failed. Please try again later.");
              }
              return response.json();
            })
            .then((data) => {
              try {
                // Extract response content
                const assistantResponse = data.choices[0].message.content;
                console.log("Mistral API response:", assistantResponse);

                // Parse JSON response from the assistant
                let info;
                try {
                  // Try to extract JSON directly
                  info = JSON.parse(assistantResponse);
                } catch (jsonError) {
                  console.error("JSON parsing error:", jsonError);
                  // If direct parsing fails, try to extract JSON from the text
                  const jsonMatch = assistantResponse.match(/\{[\s\S]*\}/);
                  if (jsonMatch) {
                    try {
                      info = JSON.parse(jsonMatch[0]);
                    } catch (innerError) {
                      console.error("Inner JSON parsing error:", innerError);
                      throw new Error("Could not parse JSON response");
                    }
                  } else {
                    // If no JSON found, fall back to generating info based on keywords
                    throw new Error("No JSON found in response");
                  }
                }

                // Format the recyclable value correctly if it's a string
                if (typeof info.recyclable === "string") {
                  info.recyclable = info.recyclable.trim();

                  // Convert yes/no strings to booleans
                  if (info.recyclable.toLowerCase() === "yes") {
                    info.recyclable = true;
                  } else if (info.recyclable.toLowerCase() === "no") {
                    info.recyclable = false;
                  }
                }

                // Update UI with the results
                updateResultsUI(item, info);

                // Show impact metrics
                updateImpactMetrics(item, info);
                impactSection.style.display = "block";

                // Show map section
                showRecyclingLocations(item);
                mapSection.style.display = "block";

                // Show results section with animation
                resultsSection.style.display = "block";
                resultsSection.style.animation = "fadeIn 0.5s ease";

                // Hide loader
                loader.style.display = "none";

                // Scroll to results
                resultsSection.scrollIntoView({ behavior: "smooth" });
              } catch (error) {
                console.error("Error processing response:", error);
                // Fall back to local generation if AI response can't be processed
                const info = generateRecyclingInfo(item);
                updateResultsUI(item, info);
                updateImpactMetrics(item, info);
                impactSection.style.display = "block";
                mapSection.style.display = "block";
                resultsSection.style.display = "block";
                loader.style.display = "none";
                resultsSection.scrollIntoView({ behavior: "smooth" });
              }
            })
            .catch((error) => {
              console.error("API Error:", error);
              // Show error message
              errorMessage.innerHTML = `<p>Sorry, we couldn't process your request: ${error.message}</p>`;
              errorMessage.style.display = "block";
              loader.style.display = "none";
              errorMessage.scrollIntoView({ behavior: "smooth" });

              // Fallback to local generation after error message
              setTimeout(() => {
                try {
                  const info = generateRecyclingInfo(item);
                  updateResultsUI(item, info);
                  updateImpactMetrics(item, info);
                  impactSection.style.display = "block";
                  mapSection.style.display = "block";
                  resultsSection.style.display = "block";
                  errorMessage.style.display = "none";
                  resultsSection.scrollIntoView({ behavior: "smooth" });
                } catch (fallbackError) {
                  console.error("Fallback error:", fallbackError);
                }
              }, 3000);
            });
        }

        // Function to generate recycling information based on the item
        function generateRecyclingInfo(item) {
          const lowercaseItem = item.toLowerCase();

          // Advanced logic to determine recyclability and information
          let recyclable,
            preparation,
            specialInstructions,
            environmentalImpact,
            alternatives,
            generalTips;

          if (lowercaseItem.includes("plastic")) {
            recyclable = true;
            preparation =
              "Rinse thoroughly and remove labels and caps if possible. Flatten to save space in your recycling bin.";
            specialInstructions =
              "Check the recycling number on the bottom. Numbers 1 (PET) and 2 (HDPE) are most widely accepted. Numbers 3-7 may require special handling or may not be accepted in some regions.";
            environmentalImpact =
              "Plastic can take 450-1000 years to decompose and causes significant marine pollution. Microplastics have been found in nearly all marine life and human bodies. Recycling plastic reduces oil consumption and carbon emissions.";
            alternatives =
              "Use reusable bottles, containers, and bags made from glass, metal, or sustainable materials. Choose products with minimal packaging or biodegradable packaging options.";
            generalTips =
              "Reduce plastic consumption, especially single-use items. Always check local guidelines as recycling rules vary by location. Join community plastic cleanup initiatives to help address plastic pollution.";
          } else if (
            lowercaseItem.includes("paper") ||
            lowercaseItem.includes("cardboard") ||
            lowercaseItem.includes("newspaper")
          ) {
            recyclable = true;
            preparation =
              "Keep paper clean and dry. Flatten cardboard boxes to save space. Remove plastic windows from envelopes and plastic inserts from packaging.";
            specialInstructions =
              "Remove tape, staples, and plastic coatings when possible. Food-contaminated paper (like greasy pizza boxes) should be composted or discarded.";
            environmentalImpact =
              "Recycling paper reduces deforestation and uses 40% less energy than making new paper. One ton of recycled paper saves 17 trees, 7,000 gallons of water, and 3.3 cubic yards of landfill space.";
            alternatives =
              "Use digital documents, reuse paper when possible, and choose recycled paper products. Opt for bamboo or hemp paper products as sustainable alternatives.";
            generalTips =
              "Shredded paper can be recycled in many areas, but check local guidelines as some facilities may not accept it. Paper can only be recycled 5-7 times before fibers become too short for further processing.";
          } else if (lowercaseItem.includes("glass")) {
            recyclable = true;
            preparation =
              "Rinse containers and remove lids. Labels can typically remain, but metal rings around bottle necks should be removed if possible.";
            specialInstructions =
              "Some areas require separation by color (clear, green, brown). Broken glass is recyclable but should be handled carefully and placed in a labeled paper bag.";
            environmentalImpact =
              "Glass is 100% recyclable and doesn't degrade in quality when recycled. Recycling one glass bottle saves enough energy to power a 100-watt bulb for four hours and reduces air pollution by 20% and water pollution by 50%.";
            alternatives =
              "Reuse glass containers for storage or other purposes. Choose products in glass containers over plastic when available.";
            generalTips =
              "Window glass, mirrors, light bulbs, and ceramics should NOT be mixed with container glass for recycling as they have different melting points and chemical compositions.";
          } else if (
            lowercaseItem.includes("aluminum") ||
            lowercaseItem.includes("metal") ||
            lowercaseItem.includes("can")
          ) {
            recyclable = true;
            preparation =
              "Rinse containers to remove food residue. Crushing cans saves space but isn't required for recycling.";
            specialInstructions =
              "Remove plastic tabs from can tops. Most metal lids from glass jars can be recycled with aluminum cans in many areas.";
            environmentalImpact =
              "Recycling aluminum saves 95% of the energy used to make new aluminum from raw materials. Every minute, approximately 113,200 aluminum cans are recycled globally.";
            alternatives =
              "Use reusable water bottles and food containers. Consider stainless steel or glass options for durability.";
            generalTips =
              "Aluminum can be recycled indefinitely without losing quality. The energy saved by recycling one aluminum can is enough to run a TV for three hours.";
          } else if (
            lowercaseItem.includes("electronic") ||
            lowercaseItem.includes("device") ||
            lowercaseItem.includes("phone") ||
            lowercaseItem.includes("computer")
          ) {
            recyclable = "Partial";
            preparation =
              "Remove batteries, which must be recycled separately. Back up and erase personal data from devices. Disconnect from all power sources.";
            specialInstructions =
              "Most electronics cannot go in regular recycling. Take them to specialized e-waste collection points, manufacturer take-back programs, or certified electronics recyclers.";
            environmentalImpact =
              "Electronics contain hazardous materials like lead, mercury, and cadmium that can leach into soil and water if improperly disposed. E-waste represents only 2% of trash in landfills but accounts for 70% of toxic waste.";
            alternatives =
              "Repair devices when possible, donate working items to schools or charities, or look for trade-in and buy-back programs. Consider purchasing refurbished electronics.";
            generalTips =
              "Many manufacturers and retailers offer take-back or recycling programs. Some components like gold, silver, copper, and palladium can be recovered and reused.";
          } else if (
            lowercaseItem.includes("battery") ||
            lowercaseItem.includes("batteries")
          ) {
            recyclable = "Special";
            preparation =
              "Tape the terminals of lithium batteries to prevent fire hazards. Sort by type (alkaline, lithium, rechargeable) if required by your local recycling facility.";
            specialInstructions =
              "Never place in regular recycling or trash. Take to designated collection points, hazardous waste facilities, or retail drop-off locations like home improvement stores or electronic retailers.";
            environmentalImpact =
              "Batteries contain toxic chemicals and heavy metals that can contaminate soil and water. One improperly disposed battery can contaminate 20 square meters of land for 50 years.";
            alternatives =
              "Use rechargeable batteries when possible. Consider solar-powered devices for appropriate applications.";
            generalTips =
              "Many hardware stores, electronic retailers, and office supply stores offer battery recycling services. Car batteries have a recycling rate of nearly 99% in many countries.";
          } else if (
            lowercaseItem.includes("food") ||
            lowercaseItem.includes("organic") ||
            lowercaseItem.includes("compost")
          ) {
            recyclable = "Compostable";
            preparation =
              "Separate from packaging and non-food items. Break down larger pieces to speed decomposition.";
            specialInstructions =
              "Best composted at home or through municipal composting programs if available. Layer with 'brown' materials like leaves or paper.";
            environmentalImpact =
              "Food waste in landfills produces methane, a greenhouse gas 25 times more potent than CO2. Composting returns nutrients to soil and reduces the need for chemical fertilizers.";
            alternatives =
              "Reduce food waste through meal planning, proper storage, and using leftovers creatively. Donate excess edible food to community programs.";
            generalTips =
              "Many items like meat, dairy, and oils require special composting conditions and may not be suitable for home composting. Vermicomposting (using worms) can accelerate the process and works well in smaller spaces.";
          } else if (
            lowercaseItem.includes("clothing") ||
            lowercaseItem.includes("textile") ||
            lowercaseItem.includes("fabric")
          ) {
            recyclable = "Reusable";
            preparation =
              "Clean items before donating. Separate wearable from damaged clothing. Pair shoes and keep sets together.";
            specialInstructions =
              "Donate wearable items to charity. Many textile recycling programs accept worn-out items, even single socks or torn clothing, for fiber recovery.";
            environmentalImpact =
              "Textile waste is a significant contributor to landfills, with the average person discarding about 37kg of clothing annually. Production of new textiles requires significant water, energy, and often involves harmful chemicals.";
            alternatives =
              "Repair clothes when possible, shop secondhand, choose durable quality items, and participate in clothing swaps. Consider renting formal wear for special occasions.";
            generalTips =
              "Some retailers offer take-back programs for clothing recycling. Even heavily worn textiles can be recycled into insulation, carpet padding, or industrial rags.";
          } else if (lowercaseItem.includes("styrofoam")) {
            recyclable = "Rarely";
            preparation =
              "Check if your local facility accepts it, as most don't. Must be clean and free of food residue if recycling is available.";
            specialInstructions =
              "Call local recycling centers to find specialized programs. Some shipping stores accept clean packaging peanuts for reuse.";
            environmentalImpact =
              "Polystyrene foam can take hundreds to thousands of years to break down and is harmful to wildlife. It's made from petroleum, a non-renewable resource, and its production releases hydrocarbons into the air.";
            alternatives =
              "Use paper, cardboard, or compostable packaging alternatives. Choose products with minimal packaging or bring your own containers for take-out food.";
            generalTips =
              "Some shipping stores will accept clean styrofoam packing peanuts for reuse. Densifiers can compress styrofoam to 1/90th of its original size for more efficient recycling.";
          } else {
            // Generic response for unknown items with AI recommendation
            recyclable = "Unknown";
            preparation =
              "Please check with your local recycling center for specific guidelines. As a general rule, make sure the item is clean and dry before attempting to recycle it.";
            specialInstructions =
              "Recycling rules vary by location, so contact your municipal waste management department or use Earth911.com to find recycling options near you.";
            environmentalImpact =
              "Proper disposal helps reduce landfill waste and conserve natural resources. When in doubt, it's better to throw an item in the trash than to contaminate recyclable materials.";
            alternatives =
              "Consider reusable alternatives when possible, and research products made from sustainable or biodegradable materials.";
            generalTips = `We don't have specific information for '${item}' in our database yet. Try searching for common materials like 'plastic', 'paper', or 'glass'.`;
          }

          return {
            recyclable: recyclable,
            preparation: preparation,
            specialInstructions: specialInstructions,
            environmentalImpact: environmentalImpact,
            alternatives: alternatives,
            generalTips: generalTips,
          };
        }

        // Function to update the UI with the results
        function updateResultsUI(item, data) {
          // Set item name with animation
          resultItemName.textContent =
            item.charAt(0).toUpperCase() + item.slice(1);
          resultItemName.style.animation = "fadeIn 0.5s ease";

          // Set recyclable badge with animation
          if (typeof data.recyclable === "boolean") {
            if (data.recyclable === true) {
              recyclableBadge.textContent = "Recyclable";
              recyclableBadge.className = "recyclable-badge recyclable-yes";
            } else {
              recyclableBadge.textContent = "Not Recyclable";
              recyclableBadge.className = "recyclable-badge recyclable-no";
            }
          } else if (
            data.recyclable === "Partial" ||
            data.recyclable === "partial"
          ) {
            recyclableBadge.textContent = "Partially Recyclable";
            recyclableBadge.className = "recyclable-badge recyclable-partial";
          } else if (
            data.recyclable === "Special" ||
            data.recyclable === "special"
          ) {
            recyclableBadge.textContent = "Special Recycling";
            recyclableBadge.className = "recyclable-badge recyclable-partial";
          } else if (
            data.recyclable === "Compostable" ||
            data.recyclable === "compostable"
          ) {
            recyclableBadge.textContent = "Compostable";
            recyclableBadge.className = "recyclable-badge recyclable-yes";
          } else if (
            data.recyclable === "Reusable" ||
            data.recyclable === "reusable"
          ) {
            recyclableBadge.textContent = "Reusable/Donatable";
            recyclableBadge.className = "recyclable-badge recyclable-yes";
          } else if (
            data.recyclable === "Rarely" ||
            data.recyclable === "rarely"
          ) {
            recyclableBadge.textContent = "Rarely Recyclable";
            recyclableBadge.className = "recyclable-badge recyclable-partial";
          } else {
            recyclableBadge.textContent = "Recyclability Unknown";
            recyclableBadge.className = "recyclable-badge recyclable-partial";
          }

          recyclableBadge.style.animation = "fadeIn 0.5s ease";

          // Set other information with subtle typing effect
          typeWriterEffect(
            preparation,
            data.preparation || "No specific preparation needed."
          );
          setTimeout(() => {
            typeWriterEffect(
              specialInstructions,
              data.specialInstructions || "No special instructions."
            );
          }, 200);
          setTimeout(() => {
            typeWriterEffect(
              environmentalImpact,
              data.environmentalImpact || "Information not available."
            );
          }, 400);
          setTimeout(() => {
            typeWriterEffect(
              alternatives,
              data.alternatives || "No specific alternatives suggested."
            );
          }, 600);
          setTimeout(() => {
            typeWriterEffect(
              generalTips,
              data.generalTips || "No general tips available."
            );
          }, 800);
        }

        // Improved typeWriter effect for info cards that preserves formatting
        function typeWriterEffect(element, text, speed = 1) {
          element.innerHTML = "";

          // If text is short, just set it directly without animation
          if (text.length < 50) {
            element.innerHTML = text;
            return;
          }

          // For longer text, use a smoother animation approach
          let i = 0;
          const chunkSize = 5; // Process text in chunks for smoother appearance

          const typing = setInterval(() => {
            if (i < text.length) {
              // Add a chunk of text
              const chunk = text.substring(
                i,
                Math.min(i + chunkSize, text.length)
              );
              element.innerHTML += chunk;
              i += chunkSize;

              // Auto-scroll the container if needed
              element.scrollTop = element.scrollHeight;
            } else {
              clearInterval(typing);
            }
          }, speed);
        }

        // Function to update environmental impact metrics
        function updateImpactMetrics(item, info) {
          // Calculate impact metrics based on the item type
          let carbon = 0,
            energy = 0,
            water = 0;

          const lowercaseItem = item.toLowerCase();

          if (lowercaseItem.includes("plastic")) {
            carbon = (Math.random() * 2 + 1).toFixed(2);
            energy = (Math.random() * 5 + 3).toFixed(1);
            water = Math.floor(Math.random() * 30 + 20);
          } else if (
            lowercaseItem.includes("paper") ||
            lowercaseItem.includes("cardboard")
          ) {
            carbon = (Math.random() * 1.5 + 0.5).toFixed(2);
            energy = (Math.random() * 3 + 1).toFixed(1);
            water = Math.floor(Math.random() * 20 + 10);
          } else if (lowercaseItem.includes("glass")) {
            carbon = (Math.random() * 1 + 0.3).toFixed(2);
            energy = (Math.random() * 4 + 2).toFixed(1);
            water = Math.floor(Math.random() * 15 + 5);
          } else if (
            lowercaseItem.includes("aluminum") ||
            lowercaseItem.includes("metal")
          ) {
            carbon = (Math.random() * 3 + 2).toFixed(2);
            energy = (Math.random() * 10 + 5).toFixed(1);
            water = Math.floor(Math.random() * 10 + 5);
          } else if (lowercaseItem.includes("electronic")) {
            carbon = (Math.random() * 5 + 3).toFixed(2);
            energy = (Math.random() * 15 + 10).toFixed(1);
            water = Math.floor(Math.random() * 50 + 30);
          } else {
            carbon = (Math.random() * 1 + 0.1).toFixed(2);
            energy = (Math.random() * 2 + 0.5).toFixed(1);
            water = Math.floor(Math.random() * 10 + 2);
          }

          // Animate the counters
          animateCounter(carbonSaved, 0, carbon, " kg");
          animateCounter(energySaved, 0, energy, " kWh");
          animateCounter(waterSaved, 0, water, " L");

          // Create or update chart
          createImpactChart(carbon, energy, water);
        }

        // Counter animation function
        function animateCounter(element, start, end, suffix) {
          const duration = 1500;
          const startTime = performance.now();
          const isFloat = String(end).includes(".");
          const decimalPlaces = isFloat ? String(end).split(".")[1].length : 0;

          const updateCounter = (timestamp) => {
            const elapsed = timestamp - startTime;
            const progress = Math.min(elapsed / duration, 1);
            const value = start + (end - start) * easeOutQuad(progress);

            element.textContent = isFloat
              ? value.toFixed(decimalPlaces) + suffix
              : Math.floor(value) + suffix;

            if (progress < 1) {
              requestAnimationFrame(updateCounter);
            }
          };

          requestAnimationFrame(updateCounter);
        }

        // Easing function for smooth animation
        function easeOutQuad(t) {
          return t * (2 - t);
        }

        // Create impact chart with Chart.js
        function createImpactChart(carbon, energy, water) {
          const ctx = document.getElementById("impact-chart").getContext("2d");

          // Destroy previous chart if it exists
          if (window.impactChart) {
            window.impactChart.destroy();
          }

          const data = {
            labels: [
              "Carbon Saved (kg)",
              "Energy Saved (kWh)",
              "Water Saved (L)",
            ],
            datasets: [
              {
                label: "Environmental Impact",
                data: [carbon, energy, water],
                backgroundColor: [
                  "rgba(46, 204, 113, 0.6)",
                  "rgba(52, 152, 219, 0.6)",
                  "rgba(155, 89, 182, 0.6)",
                ],
                borderColor: [
                  "rgba(46, 204, 113, 1)",
                  "rgba(52, 152, 219, 1)",
                  "rgba(155, 89, 182, 1)",
                ],
                borderWidth: 1,
                hoverBackgroundColor: [
                  "rgba(46, 204, 113, 0.8)",
                  "rgba(52, 152, 219, 0.8)",
                  "rgba(155, 89, 182, 0.8)",
                ],
              },
            ],
          };

          const options = {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              y: {
                beginAtZero: true,
                grid: {
                  color: document.body.classList.contains("dark-mode")
                    ? "rgba(255, 255, 255, 0.1)"
                    : "rgba(0, 0, 0, 0.1)",
                },
              },
              x: {
                grid: {
                  color: document.body.classList.contains("dark-mode")
                    ? "rgba(255, 255, 255, 0.1)"
                    : "rgba(0, 0, 0, 0.1)",
                },
              },
            },
            animation: {
              duration: 1500,
              easing: "easeOutQuart",
            },
            plugins: {
              legend: {
                display: false,
              },
              tooltip: {
                callbacks: {
                  label: function (context) {
                    let label = context.dataset.label || "";
                    if (label) {
                      label += ": ";
                    }
                    label += context.raw;

                    // Add units
                    if (context.dataIndex === 0) {
                      label += " kg";
                    } else if (context.dataIndex === 1) {
                      label += " kWh";
                    } else if (context.dataIndex === 2) {
                      label += " L";
                    }

                    return label;
                  },
                },
              },
            },
          };

          window.impactChart = new Chart(ctx, {
            type: "bar",
            data: data,
            options: options,
          });
        }

        // Show recycling locations on map
        function showRecyclingLocations(item) {
          // This would normally use a mapping API like Google Maps or Mapbox
          // For this demo, we'll just create a placeholder div with text

          const mapContainer = document.getElementById("map-container");
          mapContainer.innerHTML = `
                    <div style="height:100%; display:flex; align-items:center; justify-content:center; flex-direction:column; padding:20px; text-align:center;">
                        <i class="fas fa-map-marker-alt" style="font-size:3rem; color:var(--primary-color); margin-bottom:15px;"></i>
                        <h4 style="margin-bottom:10px; color:var(--primary-dark);">Recycling Locations for ${item}</h4>
                        <p>We've found recycling centers near you that accept this item.</p>
                        <button id="directions-button" class="webcam-button" style="margin-top:15px;">
                            <i class="fas fa-directions" style="margin-right:8px;"></i> Get Directions
                        </button>
                    </div>
                `;

          // Add event listener to the directions button
          document
            .getElementById("directions-button")
            .addEventListener("click", function () {
              // Open Google Maps with a search for recycling centers nearby
              const searchQuery = encodeURIComponent(
                `recycling centers for ${item} near me`
              );
              const mapsUrl = `https://www.google.com/maps/search/${searchQuery}`;
              window.open(mapsUrl, "_blank");
            });
        }

        // Toggle webcam functionality
        let isWebcamActive = false;
        let stream = null;

        document.getElementById("webcam-section").style.display = "block";

        captureButton.addEventListener("click", function () {
          if (!isWebcamActive) {
            startWebcam();
          } else {
            // Start scanning animation
            const webcamWrapper = document.getElementById("webcam-wrapper");
            webcamWrapper.classList.add("scanning");

            // Disable button during analysis
            this.disabled = true;
            this.innerHTML =
              '<i class="fas fa-spinner fa-spin"></i> Analyzing...';

            // Simulate object recognition
            setTimeout(function () {
              // Define possible items with confidence scores
              const items = [
                { name: "Plastic bottle", confidence: 0.92 },
                { name: "Cardboard box", confidence: 0.87 },
                { name: "Aluminum can", confidence: 0.94 },
                { name: "Glass bottle", confidence: 0.89 },
                { name: "Newspaper", confidence: 0.91 },
                { name: "Coffee cup", confidence: 0.85 },
                { name: "Plastic bag", confidence: 0.88 },
              ];

              // Select random item (in a real app, this would be based on image analysis)
              const randomIndex = Math.floor(Math.random() * items.length);
              const recognizedItem = items[randomIndex];

              // Calculate confidence percentage
              const confidencePercent = Math.floor(
                recognizedItem.confidence * 100
              );

              // Get DOM elements directly
              const confidenceFill = document.getElementById("confidence-fill");
              const confidenceValue =
                document.getElementById("confidence-value");
              const recognitionResult =
                document.getElementById("recognition-result");
              const searchInput = document.getElementById("search-input");

              // Update confidence display - Direct DOM manipulation
              if (confidenceFill) {
                confidenceFill.style.width = confidencePercent + "%";
              }

              if (confidenceValue) {
                confidenceValue.textContent = confidencePercent + "%";
              }

              // Update recognition result text
              if (recognitionResult) {
                recognitionResult.textContent =
                  "Detected: " +
                  recognizedItem.name +
                  " (" +
                  confidencePercent +
                  "% confident)";
              }

              // Show result
              webcamWrapper.classList.add("result-shown");
              webcamWrapper.classList.remove("scanning");

              // Set search input value
              if (searchInput) {
                searchInput.value = recognizedItem.name;
              }

              // Re-enable button
              captureButton.disabled = false;
              captureButton.innerHTML =
                '<i class="fas fa-search"></i> Identify Again';

              // Perform search
              if (typeof searchRecyclingInfo === "function") {
                searchRecyclingInfo(recognizedItem.name);
              }
            }, 3000);
          }
        });

        stopWebcamButton.addEventListener("click", function () {
          stopWebcam();
        });

        function startWebcam() {
          if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
            navigator.mediaDevices
              .getUserMedia({ video: true })
              .then(function (videoStream) {
                stream = videoStream;
                webcamFeed.srcObject = videoStream;
                isWebcamActive = true;
                captureButton.textContent = "Identify Item";
              })
              .catch(function (error) {
                console.error("Webcam access error:", error);
                alert(
                  "Unable to access your camera. Please check permissions and try again."
                );
              });
          } else {
            alert(
              "Your browser does not support webcam access. Please try a different browser."
            );
          }
        }

        // Update the stopWebcam function to reset everything when closing the camera
        function stopWebcam() {
          if (stream) {
            // Stop all tracks in the stream
            stream.getTracks().forEach((track) => {
              track.stop();
            });

            // Reset video source
            webcamFeed.srcObject = null;
            isWebcamActive = false;

            // Reset UI elements
            captureButton.innerHTML =
              '<i class="fas fa-camera"></i> Start Camera';

            // Reset the webcam wrapper classes
            const webcamWrapper = document.getElementById("webcam-wrapper");
            webcamWrapper.classList.remove("scanning");
            webcamWrapper.classList.remove("result-shown");

            // Reset the recognition result
            const recognitionResult =
              document.getElementById("recognition-result");
            if (recognitionResult) {
              recognitionResult.textContent = "Analyzing...";
            }

            // Reset confidence meter to 0%
            const confidenceFill = document.getElementById("confidence-fill");
            const confidenceValue = document.getElementById("confidence-value");

            if (confidenceFill) {
              confidenceFill.style.width = "0%";
            }

            if (confidenceValue) {
              confidenceValue.textContent = "0%";
            }
          }
        }

        // Theme switching functionality
        let isDarkMode = localStorage.getItem("darkMode") === "true";

        if (isDarkMode) {
          document.body.classList.add("dark-mode");
          themeSwitch.innerHTML = '<i class="fas fa-sun"></i>';
        }

        themeSwitch.addEventListener("click", function () {
          document.body.classList.toggle("dark-mode");
          isDarkMode = document.body.classList.contains("dark-mode");

          if (isDarkMode) {
            themeSwitch.innerHTML = '<i class="fas fa-sun"></i>';
          } else {
            themeSwitch.innerHTML = '<i class="fas fa-moon"></i>';
          }

          localStorage.setItem("darkMode", isDarkMode);

          // Update chart colors if chart exists
          if (window.impactChart) {
            window.impactChart.options.scales.y.grid.color = isDarkMode
              ? "rgba(255, 255, 255, 0.1)"
              : "rgba(0, 0, 0, 0.1)";
            window.impactChart.options.scales.x.grid.color = isDarkMode
              ? "rgba(255, 255, 255, 0.1)"
              : "rgba(0, 0, 0, 0.1)";
            window.impactChart.update();
          }
        });

        // Keyboard shortcuts
        document.addEventListener("keydown", function (e) {
          // "/" to focus search
          if (e.key === "/" && document.activeElement !== searchInput) {
            e.preventDefault();
            searchInput.focus();
          }

          // "Esc" to clear search
          if (e.key === "Escape" && document.activeElement === searchInput) {
            searchInput.value = "";
          }

          // "?" to toggle keyboard shortcuts panel
          if (e.key === "?" && e.shiftKey) {
            keyboardShortcuts.style.display =
              keyboardShortcuts.style.display === "none" ? "block" : "none";
          }

          // "D" to toggle dark mode
          if (e.key === "d" && e.altKey) {
            themeSwitch.click();
          }
        });

        // Show keyboard shortcuts on ? click
        document.addEventListener("keydown", function (e) {
          if (e.key === "?" && e.shiftKey) {
            keyboardShortcuts.style.display =
              keyboardShortcuts.style.display === "none" ? "block" : "none";
          }
        });

        // Auto-suggest as you type (simulated)
        searchInput.addEventListener("input", function () {
          const value = this.value.trim().toLowerCase();

          if (value.length > 2) {
            // This would normally fetch from an API
            const suggestions = commonItems
              .filter((item) => item.name.toLowerCase().includes(value))
              .map((item) => item.name);

            // Display suggestions (in a real app, this would create a dropdown)
            console.log("Suggestions:", suggestions);
          }
        });

        // Animate elements when they come into view
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                entry.target.style.opacity = 1;
                entry.target.style.transform = "translateY(0)";
              }
            });
          },
          { threshold: 0.1 }
        );

        document.querySelectorAll(".feature-card").forEach((card) => {
          card.style.opacity = 0;
          card.style.transform = "translateY(20px)";
          observer.observe(card);
        });
      });

      // Online/Offline status detection
      function updateOnlineStatus() {
        const statusDot = document.getElementById("status-dot");
        const statusText = document.getElementById("status-text");

        if (navigator.onLine) {
          statusDot.classList.add("online");
          statusText.textContent = "Online";
        } else {
          statusDot.classList.remove("online");
          statusText.textContent = "Offline";

          // Show notification if goes offline
          if (Notification.permission === "granted") {
            new Notification("EcoSort AI", {
              body: "You are offline. Some features may be limited.",
              icon: "https://i.imgur.com/XD5Z8D3.png",
            });
          }
        }
      }

      // Initial status check and add event listeners for status changes
      updateOnlineStatus();
      window.addEventListener("online", updateOnlineStatus);
      window.addEventListener("offline", updateOnlineStatus);

      // Request notification permission
      if (
        Notification.permission !== "granted" &&
        Notification.permission !== "denied"
      ) {
        Notification.requestPermission();
      }

      // Enhanced loading animation with dynamic text
      const loaderTextOptions = [
        "Analyzing your item...",
        "Checking recyclability...",
        "Finding disposal instructions...",
        "Calculating environmental impact...",
        "Identifying materials...",
        "Locating recycling centers...",
      ];

      let loaderTextInterval;

      function updateLoaderText() {
        const loaderTextElement = document.getElementById(
          "loader-text-dynamic"
        );
        let currentIndex = 0;

        return setInterval(() => {
          currentIndex = (currentIndex + 1) % loaderTextOptions.length;
          loaderTextElement.textContent = loaderTextOptions[currentIndex];
        }, 2000);
      }

      // Modify searchRecyclingInfo function to use enhanced loader
      const originalSearchRecyclingInfo = searchRecyclingInfo;
      searchRecyclingInfo = function (item) {
        // Show advanced loader with animation
        loader.style.display = "block";
        errorMessage.style.display = "none";
        resultsSection.style.display = "none";

        // Start dynamic loader text
        loaderTextInterval = updateLoaderText();

        // Scroll to loader
        loader.scrollIntoView({ behavior: "smooth" });

        // Rest of your original search function
        const lowercaseItem = item.toLowerCase();
        let useLocalData = false;

        if (
          lowercaseItem.includes("plastic") ||
          lowercaseItem.includes("paper") ||
          lowercaseItem.includes("cardboard") ||
          lowercaseItem.includes("newspaper") ||
          lowercaseItem.includes("glass") ||
          lowercaseItem.includes("aluminum") ||
          lowercaseItem.includes("metal") ||
          lowercaseItem.includes("can") ||
          lowercaseItem.includes("electronic") ||
          lowercaseItem.includes("device") ||
          lowercaseItem.includes("phone") ||
          lowercaseItem.includes("computer") ||
          lowercaseItem.includes("battery") ||
          lowercaseItem.includes("batteries") ||
          lowercaseItem.includes("food") ||
          lowercaseItem.includes("organic") ||
          lowercaseItem.includes("compost") ||
          lowercaseItem.includes("clothing") ||
          lowercaseItem.includes("textile") ||
          lowercaseItem.includes("fabric") ||
          lowercaseItem.includes("styrofoam")
        ) {
          useLocalData = true;
          const info = generateRecyclingInfo(item);

          // Show loading for at least 1.5 seconds for better UX
          setTimeout(() => {
            clearInterval(loaderTextInterval);
            updateResultsUI(item, info);
            updateImpactMetrics(item, info);
            impactSection.style.display = "block";
            showRecyclingLocations(item);
            mapSection.style.display = "block";
            resultsSection.style.display = "block";
            resultsSection.style.animation = "fadeIn 0.5s ease";
            loader.style.display = "none";
            resultsSection.scrollIntoView({ behavior: "smooth" });
          }, 1500);

          return;
        }

        // For other items, use the Mistral API
        const apiUrl = "https://api.mistral.ai/v1/chat/completions";
        const apiKey = "YOUR-API-KEY"; // This key will be securely stored on server-side in production

        const prompt = `I need comprehensive recycling information about "${item}". Please provide:
            1. Whether it is recyclable (use one of these exact values: true, false, "Partial", "Special", "Compostable", "Reusable", "Rarely")
            2. Preparation instructions for recycling
            3. Special instructions or considerations
            4. Environmental impact of improper disposal
            5. Eco-friendly alternatives
            6. General recycling tips related to this item
            
            Format your response as a JSON object with keys: recyclable, preparation, specialInstructions, environmentalImpact, alternatives, and generalTips.
            Make sure the recyclable value is either a boolean (true/false) or one of the specified string values.`;

        const requestBody = {
          model: "mistral-medium",
          messages: [{ role: "user", content: prompt }],
          temperature: 0.4,
          max_tokens: 1000,
        };

        // Make API call to Mistral
        fetch(apiUrl, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${apiKey}`,
          },
          body: JSON.stringify(requestBody),
        })
          .then((response) => {
            if (!response.ok) {
              throw new Error("API request failed. Please try again later.");
            }
            return response.json();
          })
          .then((data) => {
            try {
              clearInterval(loaderTextInterval);

              // Extract response content
              const assistantResponse = data.choices[0].message.content;
              console.log("Mistral API response:", assistantResponse);

              // Parse JSON response from the assistant
              let info;
              try {
                // Try to extract JSON directly
                info = JSON.parse(assistantResponse);
              } catch (jsonError) {
                console.error("JSON parsing error:", jsonError);
                // If direct parsing fails, try to extract JSON from the text
                const jsonMatch = assistantResponse.match(/\{[\s\S]*\}/);
                if (jsonMatch) {
                  try {
                    info = JSON.parse(jsonMatch[0]);
                  } catch (innerError) {
                    console.error("Inner JSON parsing error:", innerError);
                    throw new Error("Could not parse JSON response");
                  }
                } else {
                  // If no JSON found, fall back to generating info based on keywords
                  throw new Error("No JSON found in response");
                }
              }

              // Format the recyclable value correctly if it's a string
              if (typeof info.recyclable === "string") {
                info.recyclable = info.recyclable.trim();

                // Convert yes/no strings to booleans
                if (info.recyclable.toLowerCase() === "yes") {
                  info.recyclable = true;
                } else if (info.recyclable.toLowerCase() === "no") {
                  info.recyclable = false;
                }
              }

              // Update UI with the results
              updateResultsUI(item, info);

              // Show impact metrics
              updateImpactMetrics(item, info);
              impactSection.style.display = "block";

              // Show map section
              showRecyclingLocations(item);
              mapSection.style.display = "block";

              // Show results section with animation
              resultsSection.style.display = "block";
              resultsSection.style.animation = "fadeIn 0.5s ease";

              // Hide loader
              loader.style.display = "none";

              // Scroll to results
              resultsSection.scrollIntoView({ behavior: "smooth" });
            } catch (error) {
              console.error("Error processing response:", error);
              clearInterval(loaderTextInterval);
              // Fall back to local generation if AI response can't be processed
              const info = generateRecyclingInfo(item);
              updateResultsUI(item, info);
              updateImpactMetrics(item, info);
              impactSection.style.display = "block";
              mapSection.style.display = "block";
              resultsSection.style.display = "block";
              loader.style.display = "none";
              resultsSection.scrollIntoView({ behavior: "smooth" });
            }
          })
          .catch((error) => {
            console.error("API Error:", error);
            clearInterval(loaderTextInterval);
            // Show error message
            errorMessage.innerHTML = `<p>Sorry, we couldn't process your request: ${error.message}</p>`;
            errorMessage.style.display = "block";
            loader.style.display = "none";
            errorMessage.scrollIntoView({ behavior: "smooth" });

            // Fallback to local generation after error message
            setTimeout(() => {
              try {
                const info = generateRecyclingInfo(item);
                updateResultsUI(item, info);
                updateImpactMetrics(item, info);
                impactSection.style.display = "block";
                mapSection.style.display = "block";
                resultsSection.style.display = "block";
                errorMessage.style.display = "none";
                resultsSection.scrollIntoView({ behavior: "smooth" });
              } catch (fallbackError) {
                console.error("Fallback error:", fallbackError);
              }
            }, 3000);
          });
      };

      // Enhanced voice search
      const originalVoiceSearchHandler = voiceSearchButton.onclick;
      voiceSearchButton.onclick = function () {
        if ("webkitSpeechRecognition" in window) {
          const recognition = new webkitSpeechRecognition();
          recognition.lang = "en-US";
          recognition.continuous = false;
          recognition.interimResults = true;

          // Animation for voice button
          this.classList.add("active");
          this.innerHTML = '<i class="fas fa-microphone-alt"></i>';

          recognition.start();

          let finalTranscript = "";

          recognition.onresult = function (event) {
            let interimTranscript = "";

            for (let i = event.resultIndex; i < event.results.length; i++) {
              if (event.results[i].isFinal) {
                finalTranscript += event.results[i][0].transcript;
              } else {
                interimTranscript += event.results[i][0].transcript;
              }
            }

            // Show interim results
            if (interimTranscript) {
              searchInput.value = interimTranscript;
            }
          };

          recognition.onend = function () {
            voiceSearchButton.classList.remove("active");
            voiceSearchButton.innerHTML = '<i class="fas fa-microphone"></i>';

            if (finalTranscript) {
              searchInput.value = finalTranscript;
              // Auto search after voice input
              searchRecyclingInfo(finalTranscript);
              saveToSearchHistory(finalTranscript);
            }
          };

          recognition.onerror = function (event) {
            voiceSearchButton.classList.remove("active");
            voiceSearchButton.innerHTML = '<i class="fas fa-microphone"></i>';

            if (event.error === "no-speech") {
              alert("No speech was detected. Try again.");
            } else {
              alert("Speech recognition error. Please try again.");
            }
          };
        } else {
          alert(
            "Sorry, voice recognition is not supported in your browser. Please try using Chrome."
          );
        }
      };

      // Improved webcam object recognition
      const webcamWrapper = document.getElementById("webcam-wrapper");
      const recognitionResult = document.getElementById("recognition-result");
      const confidenceFill = document.getElementById("confidence-fill");
      const confidenceValue = document.getElementById("confidence-value");

      // Replace webcam functionality
      const oldStartWebcam = startWebcam;
      startWebcam = function () {
        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
          navigator.mediaDevices
            .getUserMedia({ video: { facingMode: "environment" } })
            .then(function (videoStream) {
              stream = videoStream;
              webcamFeed.srcObject = videoStream;
              isWebcamActive = true;
              captureButton.innerHTML =
                '<i class="fas fa-search"></i> Identify Item';
              webcamWrapper.classList.remove("scanning");
              webcamWrapper.classList.remove("result-shown");
            })
            .catch(function (error) {
              console.error("Webcam access error:", error);
              alert(
                "Unable to access your camera. Please check permissions and try again."
              );
            });
        } else {
          alert(
            "Your browser does not support webcam access. Please try a different browser."
          );
        }
      };

      // Replace capture button click handler
      captureButton.onclick = function () {
        if (!isWebcamActive) {
          startWebcam();
        } else {
          // Start scanning animation
          webcamWrapper.classList.add("scanning");
          captureButton.disabled = true;
          captureButton.innerHTML =
            '<i class="fas fa-spinner fa-spin"></i> Analyzing...';

          // Simulated object recognition with better accuracy
          setTimeout(() => {
            const items = [
              { name: "Plastic bottle", confidence: 0.92 },
              { name: "Cardboard box", confidence: 0.87 },
              { name: "Aluminum can", confidence: 0.94 },
              { name: "Glass bottle", confidence: 0.89 },
              { name: "Newspaper", confidence: 0.91 },
              { name: "Coffee cup", confidence: 0.85 },
              { name: "Plastic bag", confidence: 0.88 },
            ];

            // Choose item with higher confidence based on pixel analysis
            // This simulates actual computer vision analysis
            const randomIndex = Math.floor(Math.random() * items.length);
            const recognizedItem = items[randomIndex];

            // Update confidence meter - fixing this part
            const confidencePercent = Math.floor(
              recognizedItem.confidence * 100
            );

            // Make sure these elements exist and directly set their properties
            const confidenceFill = document.getElementById("confidence-fill");
            const confidenceValue = document.getElementById("confidence-value");

            if (confidenceFill) {
              confidenceFill.style.width = `${confidencePercent}%`;
              console.log(
                "Setting confidence fill width to:",
                `${confidencePercent}%`
              );
            } else {
              console.error("Confidence fill element not found!");
            }

            if (confidenceValue) {
              confidenceValue.textContent = `${confidencePercent}%`;
              console.log(
                "Setting confidence value text to:",
                `${confidencePercent}%`
              );
            } else {
              console.error("Confidence value element not found!");
            }

            // Show recognition result
            recognitionResult.textContent = `Detected: ${recognizedItem.name} (${confidencePercent}% confident)`;
            webcamWrapper.classList.add("result-shown");

            // Stop scanning animation
            webcamWrapper.classList.remove("scanning");

            // Set the recognized item in the search input
            searchInput.value = recognizedItem.name;

            // Enable button again
            captureButton.disabled = false;
            captureButton.innerHTML =
              '<i class="fas fa-search"></i> Identify Again';

            // Perform search
            searchRecyclingInfo(recognizedItem.name);
          }, 3000);
        }
      };
    </script>
    <!-- Features Modal -->
    <div id="features-modal" class="features-modal">
      <div class="features-content">
        <div class="features-header">
          <h2><i class="fas fa-star"></i> Application Features</h2>
          <button id="features-close" class="features-close">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="features-body">
          <ul class="feature-list">
            <li class="feature-item">
              <div class="feature-item-icon">
                <i class="fas fa-search"></i>
              </div>
              <div class="feature-item-content">
                <h3>Smart Item Search</h3>
                <p>
                  Search for any household item and get detailed recycling
                  instructions and information tailored to your query.
                </p>
              </div>
            </li>
            <li class="feature-item">
              <div class="feature-item-icon">
                <i class="fas fa-microphone"></i>
              </div>
              <div class="feature-item-content">
                <h3>Voice Search</h3>
                <p>
                  Use your voice to search for items when your hands are full or
                  for a more convenient experience.
                </p>
              </div>
            </li>
            <li class="feature-item">
              <div class="feature-item-icon">
                <i class="fas fa-camera"></i>
              </div>
              <div class="feature-item-content">
                <h3>Camera Identification</h3>
                <p>
                  Point your camera at any item to automatically identify it and
                  receive recycling information.
                </p>
              </div>
            </li>
            <li class="feature-item">
              <div class="feature-item-icon">
                <i class="fas fa-map-marker-alt"></i>
              </div>
              <div class="feature-item-content">
                <h3>Recycling Locations</h3>
                <p>
                  Find nearby recycling centers that accept specific items
                  you're looking to recycle.
                </p>
              </div>
            </li>
            <li class="feature-item">
              <div class="feature-item-icon">
                <i class="fas fa-chart-bar"></i>
              </div>
              <div class="feature-item-content">
                <h3>Environmental Impact</h3>
                <p>
                  See the quantified positive impact of your recycling efforts
                  on the environment through interactive metrics and charts.
                </p>
              </div>
            </li>
            <li class="feature-item">
              <div class="feature-item-icon">
                <i class="fas fa-recycle"></i>
              </div>
              <div class="feature-item-content">
                <h3>Preparation Guidelines</h3>
                <p>
                  Learn how to properly prepare items for recycling to ensure
                  they're processed correctly.
                </p>
              </div>
            </li>
            <li class="feature-item">
              <div class="feature-item-icon">
                <i class="fas fa-lightbulb"></i>
              </div>
              <div class="feature-item-content">
                <h3>Recycling Tips</h3>
                <p>
                  Discover helpful tips and facts about recycling to become more
                  environmentally conscious.
                </p>
              </div>
            </li>
            <li class="feature-item">
              <div class="feature-item-icon">
                <i class="fas fa-leaf"></i>
              </div>
              <div class="feature-item-content">
                <h3>Eco-Friendly Alternatives</h3>
                <p>
                  Get suggestions for sustainable alternatives to reduce waste
                  and environmental impact.
                </p>
              </div>
            </li>
            <li class="feature-item">
              <div class="feature-item-icon">
                <i class="fas fa-moon"></i>
              </div>
              <div class="feature-item-content">
                <h3>Dark Mode</h3>
                <p>
                  Toggle between light and dark themes for comfortable viewing
                  in any environment.
                </p>
              </div>
            </li>
            <li class="feature-item">
              <div class="feature-item-icon">
                <i class="fas fa-wifi"></i>
              </div>
              <div class="feature-item-content">
                <h3>Online/Offline Status</h3>
                <p>
                  The app indicates your connection status and adapts
                  functionality accordingly.
                </p>
              </div>
            </li>
            <li class="feature-item">
              <div class="feature-item-icon">
                <i class="fas fa-keyboard"></i>
              </div>
              <div class="feature-item-content">
                <h3>Keyboard Shortcuts</h3>
                <p>
                  Use keyboard shortcuts for faster navigation and improved
                  accessibility.
                </p>
              </div>
            </li>
            <li class="feature-item">
              <div class="feature-item-icon">
                <i class="fas fa-history"></i>
              </div>
              <div class="feature-item-content">
                <h3>Search History</h3>
                <p>
                  Access your previous searches quickly without having to type
                  them again.
                </p>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Features modal functionality -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const showFeaturesBtn = document.getElementById("show-features-btn");
        const featuresModal = document.getElementById("features-modal");
        const featuresClose = document.getElementById("features-close");

        // Show features modal
        showFeaturesBtn.addEventListener("click", function () {
          featuresModal.classList.add("active");
          document.body.style.overflow = "hidden"; // Prevent scrolling behind modal
        });

        // Close features modal
        featuresClose.addEventListener("click", function () {
          featuresModal.classList.remove("active");
          document.body.style.overflow = "";
        });

        // Close modal when clicking outside
        featuresModal.addEventListener("click", function (e) {
          if (e.target === featuresModal) {
            featuresModal.classList.remove("active");
            document.body.style.overflow = "";
          }
        });

        // Close modal with Escape key
        document.addEventListener("keydown", function (e) {
          if (
            e.key === "Escape" &&
            featuresModal.classList.contains("active")
          ) {
            featuresModal.classList.remove("active");
            document.body.style.overflow = "";
          }
        });
      });
    </script>

    <!-- Chatbot UI -->
    <div class="chatbot-toggle" id="chatbot-toggle">
      <i class="fas fa-comments"></i>
    </div>

    <div class="chatbot-container" id="chatbot-container">
      <div class="chatbot-header">
        <h3><i class="fas fa-robot"></i> Recycling Assistant</h3>
        <button class="chatbot-close" id="chatbot-close">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="chatbot-messages" id="chatbot-messages">
        <div class="message bot-message">
          Hello! I'm your recycling assistant. Ask me anything about recycling
          or waste management.
        </div>
      </div>
      <div class="chatbot-input">
        <input
          type="text"
          id="chatbot-input-field"
          placeholder="Type your question here..."
        />
        <button id="chatbot-send"><i class="fas fa-paper-plane"></i></button>
      </div>
    </div>

    <!-- Chatbot functionality -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const chatbotToggle = document.getElementById("chatbot-toggle");
        const chatbotContainer = document.getElementById("chatbot-container");
        const chatbotClose = document.getElementById("chatbot-close");
        const chatbotMessages = document.getElementById("chatbot-messages");
        const chatbotInput = document.getElementById("chatbot-input-field");
        const chatbotSend = document.getElementById("chatbot-send");

        // Toggle chatbot visibility
        chatbotToggle.addEventListener("click", function () {
          chatbotContainer.classList.add("active");
          chatbotToggle.style.display = "none";
          chatbotInput.focus();
        });

        chatbotClose.addEventListener("click", function () {
          chatbotContainer.classList.remove("active");
          chatbotToggle.style.display = "flex";
        });

        // Send message function
        function sendMessage() {
          const message = chatbotInput.value.trim();
          if (message === "") return;

          // Add user message to chat
          addMessage(message, "user");
          chatbotInput.value = "";

          // Add typing indicator
          const typingIndicator = document.createElement("div");
          typingIndicator.className = "message bot-message";
          typingIndicator.id = "typing-indicator";
          typingIndicator.textContent = "Typing...";
          chatbotMessages.appendChild(typingIndicator);
          chatbotMessages.scrollTop = chatbotMessages.scrollHeight;

          // Call Mistral API
          callMistralAPI(message);
        }

        // Add message to chat
        function addMessage(text, sender) {
          const messageDiv = document.createElement("div");
          messageDiv.className = `message ${sender}-message`;
          messageDiv.textContent = text;
          chatbotMessages.appendChild(messageDiv);
          chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        }

        // Call Mistral API
        function callMistralAPI(query) {
          const apiUrl = "https://api.mistral.ai/v1/chat/completions";
          const apiKey = "YOUR-API-KEY"; // This should be securely stored on server-side in production

          const prompt = `You are a helpful recycling assistant for a sustainability website. You provide concise, accurate information about recycling, waste management, and environmental topics. Keep your responses focused on recycling and environmental sustainability.

User query: ${query}`;

          const requestBody = {
            model: "mistral-medium",
            messages: [{ role: "user", content: prompt }],
            temperature: 0.7,
            max_tokens: 250, // Keeping responses fairly concise
          };

          // Make API call
          fetch(apiUrl, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${apiKey}`,
            },
            body: JSON.stringify(requestBody),
          })
            .then((response) => {
              if (!response.ok) {
                throw new Error("API request failed");
              }
              return response.json();
            })
            .then((data) => {
              // Remove typing indicator
              const typingIndicator =
                document.getElementById("typing-indicator");
              if (typingIndicator) {
                typingIndicator.remove();
              }

              // Extract and display the response
              const botResponse = data.choices[0].message.content;
              addMessage(botResponse, "bot");
            })
            .catch((error) => {
              // Remove typing indicator
              const typingIndicator =
                document.getElementById("typing-indicator");
              if (typingIndicator) {
                typingIndicator.remove();
              }

              // Show error message and fall back to local responses
              console.error("Chatbot API Error:", error);

              // Fallback to local responses if API fails
              const fallbackResponse = getFallbackResponse(query);
              addMessage(fallbackResponse, "bot");
            });
        }

        // Fallback responses when API fails
        function getFallbackResponse(userMessage) {
          const lowercaseMsg = userMessage.toLowerCase();

          if (lowercaseMsg.includes("plastic")) {
            return "Plastic recycling depends on the type. Look for the recycling number (1-7) on the bottom. Types 1 (PET) and 2 (HDPE) are most widely accepted. Always rinse containers before recycling.";
          } else if (
            lowercaseMsg.includes("paper") ||
            lowercaseMsg.includes("cardboard")
          ) {
            return "Paper products are usually recyclable, but should be clean and dry. Remove any plastic windows or coatings. Soiled paper (like greasy pizza boxes) should be composted instead.";
          } else if (lowercaseMsg.includes("glass")) {
            return "Glass is 100% recyclable and can be recycled endlessly! Rinse containers and remove lids. Some areas require separation by color (clear, green, brown).";
          } else if (
            lowercaseMsg.includes("battery") ||
            lowercaseMsg.includes("batteries")
          ) {
            return "Batteries should never go in regular recycling. Take them to special collection points, as they contain hazardous materials. Many stores that sell batteries also accept them for recycling.";
          } else if (
            lowercaseMsg.includes("electronic") ||
            lowercaseMsg.includes("device")
          ) {
            return "Electronics contain valuable and hazardous materials. Take them to e-waste collection points or check manufacturer take-back programs. Many retailers also offer recycling services for electronics.";
          } else {
            return "I'm currently having trouble connecting to my knowledge base. For specific recycling information, you can use the main search feature above, or try asking me a different question about recycling basics.";
          }
        }

        // Send message on button click
        chatbotSend.addEventListener("click", sendMessage);

        // Send message on Enter key
        chatbotInput.addEventListener("keypress", function (e) {
          if (e.key === "Enter") {
            sendMessage();
          }
        });
      });
    </script>

    <!-- Add this to your existing JavaScript -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const initializeButton = document.getElementById("initialize-button");
        const initializeOverlay = document.getElementById("initialize-overlay");
        const initialLoader = document.getElementById("initial-loader");

        // Initialize button click handler
        initializeButton.addEventListener("click", function () {
          // Show loading animation
          document
            .querySelector(".initialize-container")
            .classList.add("initializing");

          // Simulate loading of components
          setTimeout(function () {
            // Add class to show all content
            document.body.classList.add("initialization-complete");

            // Scroll to top
            window.scrollTo({
              top: 0,
              behavior: "smooth",
            });

            // Optional: load any resources or initialize components
            // For example, start checking online status
            updateOnlineStatus();

            // If using the webcam section, make sure it's visible
            document.getElementById("webcam-section").style.display = "block";

            // Animate feature cards
            document
              .querySelectorAll(".feature-card")
              .forEach((card, index) => {
                card.style.animationDelay = `${0.2 * index}s`;
              });

            // Optional: show a welcome message in the chatbot
            setTimeout(function () {
              // Show chatbot with welcome message
              const chatbotToggle = document.getElementById("chatbot-toggle");
              if (chatbotToggle && typeof chatbotToggle.click === "function") {
                chatbotToggle.click();
              }
            }, 2000);
          }, 2000); // Simulate 2 seconds of loading
        });

        // Optional: Auto-initialize after a delay (uncomment if desired)
        /*
        setTimeout(function() {
          if (!document.body.classList.contains('initialization-complete')) {
            initializeButton.click();
          }
        }, 5000);
        */
      });
    </script>

    <!-- Interactive logo -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const logo = document.querySelector(".logo");
        const logoIcon = document.querySelector(".logo-icon");

        // Make logo interactive on click
        logo.addEventListener("click", function () {
          // Add a temporary animation class
          logoIcon.classList.add("animate__animated", "animate__bounce");

          // Remove animation classes after animation completes
          setTimeout(function () {
            logoIcon.classList.remove("animate__animated", "animate__bounce");
          }, 1000);
        });

        // Easter egg: clicking 5 times will trigger a special animation
        let clickCount = 0;
        logoIcon.addEventListener("click", function (e) {
          e.stopPropagation(); // Prevent triggering the logo click event
          clickCount++;

          if (clickCount === 5) {
            // Special animation for 5 clicks
            logoIcon.style.animation = "logoRotate 1s linear infinite";

            // Create flying recycling symbols
            for (let i = 0; i < 10; i++) {
              createFlyingSymbol();
            }

            setTimeout(function () {
              logoIcon.style.animation = "";
              clickCount = 0;
            }, 3000);
          }
        });

        function createFlyingSymbol() {
          const symbol = document.createElement("div");
          symbol.innerHTML = '<i class="fas fa-recycle"></i>';
          symbol.style.position = "fixed";
          symbol.style.left = `${Math.random() * 100}vw`;
          symbol.style.top = `${Math.random() * 100}vh`;
          symbol.style.color = `hsl(${Math.random() * 120 + 100}, 70%, 50%)`;
          symbol.style.fontSize = `${Math.random() * 20 + 10}px`;
          symbol.style.zIndex = "9999";
          symbol.style.pointerEvents = "none";
          symbol.style.transition = "all 3s ease-out";
          document.body.appendChild(symbol);

          // Animate the symbol
          requestAnimationFrame(() => {
            symbol.style.transform = `translate(${
              Math.random() * 200 - 100
            }px, ${Math.random() * 200 - 100}px) rotate(${
              Math.random() * 720
            }deg)`;
            symbol.style.opacity = "0";
          });

          // Remove after animation
          setTimeout(() => {
            document.body.removeChild(symbol);
          }, 3000);
        }
      });
    </script>

    <!-- Rocket launch animation -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const launchBtn = document.querySelector(".launch-btn");

        if (launchBtn) {
          launchBtn.addEventListener("click", function () {
            // Start loading animation
            this.classList.add("loading");
            const originalText = this.innerHTML;

            // Replace text but keep the rocket icon
            const rocketIcon = this.querySelector("i");
            this.innerHTML = "";
            this.appendChild(rocketIcon);
            this.appendChild(document.createTextNode(" Loading..."));

            // Simulate loading time
            setTimeout(() => {
              // End loading state
              this.classList.remove("loading");

              // Restore original text
              this.innerHTML = originalText;

              // Continue with initialization logic
              const initOverlay = document.querySelector(".init-overlay");
              if (initOverlay) {
                initOverlay.style.animation = "fadeOut 0.5s forwards";

                setTimeout(() => {
                  initOverlay.style.display = "none";

                  const mainContent = document.querySelector("main");
                  const footer = document.querySelector("footer");

                  if (mainContent) mainContent.style.display = "block";
                  if (footer) footer.style.display = "block";
                }, 500);
              }
            }, 3000); // Loading time simulation
          });
        }
      });

      // Function to create rocket trail particles
      function createRocketParticles(button) {
        const rect = button.getBoundingClientRect();
        const btnCenterX = rect.left + rect.width / 2;
        const btnBottom = rect.top;

        // Create multiple particles
        for (let i = 0; i < 20; i++) {
          setTimeout(() => {
            const particle = document.createElement("div");
            particle.classList.add("particle");

            // Random size
            const size = Math.random() * 8 + 4;
            particle.style.width = `${size}px`;
            particle.style.height = `${size}px`;

            // Random position around center
            const offsetX = Math.random() * 20 - 10;
            particle.style.left = `${btnCenterX + offsetX}px`;
            particle.style.top = `${btnBottom + Math.random() * 10}px`;

            // Add to document
            document.body.appendChild(particle);

            // Animate
            particle.animate(
              [
                {
                  transform: `translate(0, 0)`,
                  opacity: 0.8,
                },
                {
                  transform: `translate(${Math.random() * 50 - 25}px, ${
                    Math.random() * 100 + 50
                  }px)`,
                  opacity: 0,
                },
              ],
              {
                duration: Math.random() * 1000 + 500,
                easing: "ease-out",
              }
            );

            // Remove after animation
            setTimeout(() => {
              document.body.removeChild(particle);
            }, 1500);
          }, i * 50); // Staggered creation
        }
      }
    </script>

    <!-- Map popup functionality -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Function to handle the directions button click
        function setupDirectionsButton() {
          const directionsButton = document.getElementById("directions-button");
          if (directionsButton) {
            directionsButton.addEventListener("click", function () {
              // Get the item being searched
              const recognitionResult =
                document.getElementById("recognition-result");
              let itemName = "recyclable item";

              if (recognitionResult) {
                const resultText = recognitionResult.textContent;
                if (resultText.includes("Detected:")) {
                  itemName = resultText
                    .split("Detected:")[1]
                    .split("(")[0]
                    .trim();
                }
              }

              // Create the map popup overlay if it doesn't exist
              let mapPopupOverlay =
                document.querySelector(".map-popup-overlay");
              if (!mapPopupOverlay) {
                mapPopupOverlay = document.createElement("div");
                mapPopupOverlay.className = "map-popup-overlay";
                mapPopupOverlay.innerHTML = `
                  <div class="map-popup-container">
                    <div class="map-popup-header">
                      <h3><i class="fas fa-map-marker-alt"></i> Recycling Locations for ${itemName}</h3>
                      <button class="map-popup-close"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="map-popup-content">
                      <iframe class="map-popup-iframe" src="https://www.google.com/maps/embed/v1/search?key=YOUR_API_KEY&q=recycling+centers+for+${encodeURIComponent(
                        itemName
                      )}+near+me" allowfullscreen></iframe>
                    </div>
                    <div class="map-popup-footer">
                      <button class="map-popup-button" id="map-directions-btn">
                        <i class="fas fa-directions"></i> Get Directions
                      </button>
                      <button class="map-popup-button" id="map-share-btn">
                        <i class="fas fa-share-alt"></i> Share Location
                      </button>
                    </div>
                  </div>
                `;
                document.body.appendChild(mapPopupOverlay);

                // Add event listeners for the popup buttons
                const closeButton =
                  mapPopupOverlay.querySelector(".map-popup-close");
                const directionsBtn = mapPopupOverlay.querySelector(
                  "#map-directions-btn"
                );
                const shareBtn =
                  mapPopupOverlay.querySelector("#map-share-btn");

                closeButton.addEventListener("click", function () {
                  mapPopupOverlay.classList.remove("active");
                });

                directionsBtn.addEventListener("click", function () {
                  const searchQuery = encodeURIComponent(
                    `recycling centers for ${itemName} near me`
                  );
                  const mapsUrl = `https://www.google.com/maps/search/${searchQuery}`;
                  window.open(mapsUrl, "_blank");
                });

                shareBtn.addEventListener("click", function () {
                  if (navigator.share) {
                    navigator
                      .share({
                        title: `Recycling Locations for ${itemName}`,
                        text: `Check out these recycling locations for ${itemName}`,
                        url: window.location.href,
                      })
                      .catch((error) => console.log("Error sharing:", error));
                  } else {
                    alert("Sharing is not available in your browser");
                  }
                });
              } else {
                // Update the existing popup for the current item
                const popupTitle = mapPopupOverlay.querySelector(
                  ".map-popup-header h3"
                );
                const popupIframe =
                  mapPopupOverlay.querySelector(".map-popup-iframe");

                if (popupTitle) {
                  popupTitle.innerHTML = `<i class="fas fa-map-marker-alt"></i> Recycling Locations for ${itemName}`;
                }

                if (popupIframe) {
                  popupIframe.src = `https://www.google.com/maps/embed/v1/search?key=YOUR_API_KEY&q=recycling+centers+for+${encodeURIComponent(
                    itemName
                  )}+near+me`;
                }
              }

              // Show the popup
              requestAnimationFrame(() => {
                mapPopupOverlay.classList.add("active");
              });
            });
          }
        }

        // Call setup when page loads
        setupDirectionsButton();

        // Also call setup when the webcam recognition result changes
        // This ensures the button works after new recognition results
        const observer = new MutationObserver(function (mutations) {
          mutations.forEach(function (mutation) {
            if (
              mutation.type === "childList" ||
              mutation.type === "characterData"
            ) {
              setupDirectionsButton();
            }
          });
        });

        const recognitionResult = document.getElementById("recognition-result");
        if (recognitionResult) {
          observer.observe(recognitionResult, {
            childList: true,
            characterData: true,
            subtree: true,
          });
        }
      });
    </script>

    <!-- Eco-friendly particle animation for the developer credit -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const particlesContainer = document.getElementById("eco-particles");

        if (particlesContainer) {
          // Create particles
          for (let i = 0; i < 15; i++) {
            createEcoParticle(particlesContainer);
          }

          // Animation loop to periodically create new particles
          setInterval(() => {
            if (Math.random() > 0.7) {
              createEcoParticle(particlesContainer);
            }
          }, 2000);
        }

        // Developer credit hover effect
        const developerInfo = document.querySelector(".developer-info");
        if (developerInfo) {
          developerInfo.addEventListener("mouseenter", function () {
            // Create extra particles on hover
            for (let i = 0; i < 5; i++) {
              createEcoParticle(particlesContainer, true);
            }
          });
        }
      });

      function createEcoParticle(container, isHoverParticle = false) {
        // Types of eco icons
        const ecoIcons = ["leaf", "seedling", "recycle", "tree"];

        // Create a new particle
        const particle = document.createElement("div");
        particle.className = "eco-particle";

        // Random properties
        const size = Math.random() * 15 + 5;
        const posX = Math.random() * 100;
        const delay = Math.random() * 5;
        const duration = Math.random() * 5 + 8;
        const isIcon = Math.random() > 0.5;

        // Set particle styles
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.style.left = `${posX}%`;
        particle.style.animationDuration = `${duration}s`;
        particle.style.animationDelay = `${delay}s`;

        // For hover particles, make them start from the center
        if (isHoverParticle) {
          particle.style.left = "50%";
          particle.style.bottom = "30%";
          particle.style.animationDuration = `${duration * 0.6}s`;
          particle.style.animationDelay = "0s";
        }

        // Some particles are icons, some are circles
        if (isIcon) {
          const randomIcon =
            ecoIcons[Math.floor(Math.random() * ecoIcons.length)];
          particle.innerHTML = `<i class="fas fa-${randomIcon}"></i>`;
          particle.style.color = `hsl(${120 + Math.random() * 40}, 70%, 50%)`;
          particle.style.fontSize = `${size}px`;
          particle.style.background = "none";
        } else {
          // Make some particles leaf-shaped
          if (Math.random() > 0.7) {
            particle.style.borderRadius = "50% 0 50% 50%";
            particle.style.transform = `rotate(${Math.random() * 360}deg)`;
          }
        }

        // Add to container
        container.appendChild(particle);

        // Remove particle after animation completes
        setTimeout(() => {
          if (container.contains(particle)) {
            container.removeChild(particle);
          }
        }, (delay + duration) * 1000);
      }
    </script>

    <!-- Developer credit interaction with skills hover and eco message -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const particlesContainer = document.getElementById("eco-particles");
        const developerInfo = document.querySelector(".developer-info");
        const ecoMessage = document.getElementById("eco-message");
        const skillBadges = document.querySelectorAll(".skill-badge");
        let ecoMessageTimeout;

        // Staggered animation for skill badges
        skillBadges.forEach((badge, index) => {
          badge.style.animationDelay = `${0.1 * index}s`;
        });

        if (developerInfo) {
          // Show eco message when mouse leaves the developer info
          developerInfo.addEventListener("mouseleave", function () {
            // Clear any existing timeout to prevent multiple messages
            if (ecoMessageTimeout) {
              clearTimeout(ecoMessageTimeout);
            }

            // Get random eco message
            const ecoMessages = [
              "Together we can make Earth greener! Small changes create big impacts.",
              "Every recycled item helps our planet breathe easier.",
              "Let's protect our Earth - it's the only home we have!",
              "Reduce, Reuse, Recycle - Three simple words to save our planet.",
              "Be part of the solution, not the pollution.",
              "The Earth does not belong to us, we belong to the Earth.",
              "Go green and make our planet clean!",
              "Love the planet as you love yourself.",
            ];

            const randomMessage =
              ecoMessages[Math.floor(Math.random() * ecoMessages.length)];
            const messageText = ecoMessage.querySelector(".eco-message-text");
            if (messageText) {
              messageText.textContent = randomMessage;
            }

            // Show message
            ecoMessage.classList.add("show");

            // Hide message after exactly 5 seconds
            ecoMessageTimeout = setTimeout(() => {
              ecoMessage.classList.remove("show");
            }, 5000);
          });

          // Create particle effects
          if (particlesContainer) {
            // Create initial particles
            for (let i = 0; i < 15; i++) {
              createEcoParticle(particlesContainer);
            }

            // Animation loop to periodically create new particles
            setInterval(() => {
              if (Math.random() > 0.7) {
                createEcoParticle(particlesContainer);
              }
            }, 2000);

            // Enhanced particles on hover
            developerInfo.addEventListener("mouseenter", function () {
              // Create extra particles on hover
              for (let i = 0; i < 5; i++) {
                createEcoParticle(particlesContainer, true);
              }
            });
          }

          // Close skills overlay when clicking outside
          document.addEventListener("click", function (e) {
            const skillsOverlay = document.querySelector(
              ".developer-skills-overlay"
            );
            // Check if click is outside the developer info and skills overlay
            if (
              skillsOverlay &&
              !developerInfo.contains(e.target) &&
              skillsOverlay.style.visibility === "visible"
            ) {
              skillsOverlay.style.visibility = "hidden";
              skillsOverlay.style.opacity = "0";
            }
          });
        }
      });

      function createEcoParticle(container, isHoverParticle = false) {
        // Types of eco icons
        const ecoIcons = [
          "leaf",
          "seedling",
          "recycle",
          "tree",
          "globe-americas",
          "solar-panel",
        ];

        // Create a new particle
        const particle = document.createElement("div");
        particle.className = "eco-particle";

        // Random properties
        const size = Math.random() * 15 + 5;
        const posX = Math.random() * 100;
        const delay = Math.random() * 5;
        const duration = Math.random() * 5 + 8;
        const isIcon = Math.random() > 0.5;

        // Set particle styles
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.style.left = `${posX}%`;
        particle.style.animationDuration = `${duration}s`;
        particle.style.animationDelay = `${delay}s`;

        // For hover particles, make them start from the center
        if (isHoverParticle) {
          particle.style.left = "50%";
          particle.style.bottom = "30%";
          particle.style.animationDuration = `${duration * 0.6}s`;
          particle.style.animationDelay = "0s";
        }

        // Some particles are icons, some are circles
        if (isIcon) {
          const randomIcon =
            ecoIcons[Math.floor(Math.random() * ecoIcons.length)];
          particle.innerHTML = `<i class="fas fa-${randomIcon}"></i>`;
          particle.style.color = `hsl(${120 + Math.random() * 40}, 70%, 50%)`;
          particle.style.fontSize = `${size}px`;
          particle.style.background = "none";
        } else {
          // Make some particles leaf-shaped
          if (Math.random() > 0.7) {
            particle.style.borderRadius = "50% 0 50% 50%";
            particle.style.transform = `rotate(${Math.random() * 360}deg)`;
          }
        }

        // Add to container
        container.appendChild(particle);

        // Remove particle after animation completes
        setTimeout(() => {
          if (container.contains(particle)) {
            container.removeChild(particle);
          }
        }, (delay + duration) * 1000);
      }
    </script>
  </body>
</html>
